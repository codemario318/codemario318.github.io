<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="헤드 퍼스트 디자인 패턴"><title>4. 팩토리 패턴</title><link rel=canonical href=https://codemario318.github.io/post/gof/4/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="4. 팩토리 패턴"><meta property="og:description" content="헤드 퍼스트 디자인 패턴"><meta property="og:url" content="https://codemario318.github.io/post/gof/4/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Common"><meta property="article:published_time" content="2023-10-29T13:29:08+09:00"><meta property="article:modified_time" content="2023-10-29T13:29:08+09:00"><meta property="og:image" content="https://codemario318.github.io/post/gof/4/cover.png"><meta name=twitter:title content="4. 팩토리 패턴"><meta name=twitter:description content="헤드 퍼스트 디자인 패턴"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/gof/4/cover.png"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>4</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>1</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>4</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>3</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#팩토리>팩토리</a><ol><li><a href=#근본-원인>근본 원인</a></li></ol></li><li><a href=#의존성-뒤집기-원칙>의존성 뒤집기 원칙</a><ol><li><a href=#의존성-뒤집기-원칙을-지키는-방법>의존성 뒤집기 원칙을 지키는 방법</a></li></ol></li><li><a href=#간단한-팩토리>간단한 팩토리</a><ol><li><a href=#최첨단-피자-가게의-문제>최첨단 피자 가게의 문제</a></li><li><a href=#최첨단-피자-가게에-적용>최첨단 피자 가게에 적용</a></li></ol></li><li><a href=#팩토리-메소드-패턴>팩토리 메소드 패턴</a><ol><li><a href=#병렬-클래스-계층구조>병렬 클래스 계층구조</a></li><li><a href=#간단한-팩토리와-차이점>간단한 팩토리와 차이점</a></li><li><a href=#피자-가게-프레임워크-만들기>피자 가게 프레임워크 만들기</a></li></ol></li><li><a href=#추상-팩토리-패턴>추상 팩토리 패턴</a></li><li><a href=#팩토리-패턴-활용법>팩토리 패턴 활용법</a></li><li><a href=#디자인-도구상자-안에-들어가야할-도구들>디자인 도구상자 안에 들어가야할 도구들</a></li><li><a href=#핵심-정리>핵심 정리</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/gof/4/><img src=/post/gof/4/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_800x0_resize_box_3.png srcset="/post/gof/4/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_800x0_resize_box_3.png 800w, /post/gof/4/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_1600x0_resize_box_3.png 1600w" width=800 height=966 loading=lazy alt="Featured image of post 4. 팩토리 패턴"></a></div><div class=article-details><header class=article-category><a href=/categories/headfirstdesignpatterns/>헤드 퍼스트 디자인 패턴</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/gof/4/>4. 팩토리 패턴</a></h2><h3 class=article-subtitle>헤드 퍼스트 디자인 패턴</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2023/10/29</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>13 minute read</time></div></footer></div></header><section class=article-content><blockquote><p>느슨한 결합으로 객체지향 디자인을 만들어봅시다.</p></blockquote><p>팩토리 패턴은 객체를 생성하는 부분을 분리하여 캡슐화 하는 방식으로 유연성과 확장성이 뛰어난 구조를 제공한다.</p><h2 id=팩토리>팩토리</h2><p>객체의 인스턴스를 만드는 작업이 항상 공개되어야 하는 것은 아니며, 오히려 모든 것을 공개했을때 결합 문제가 발생할 수 있다.</p><p>팩토리 패턴은 불필요한 의존성을 없애서 결합 문제를 해결하는데 도움을 줄 수 있다.</p><hr><p><code>new</code>를 사용하면 구상 클래스의 인스턴스가 만들어진다.</p><p>인터페이스나 추상클래스 같은 상위 개념으로 타입을 선언한다고 하더라도, 결과적으로 구상클래스(하위 개념)을 할당하기 때문에 특정 구현에 의존된다고 볼 수 있다.</p><ul><li>구상 클래스를 바탕으로 코딩하면 나중에 코드를 수정해야 할 가능성이 커지고, 유연성이 떨어진다.</li></ul><p>여러 구상 클래스가 있고 특정 상황에서 선택하여 만들어야 할 상황이라면 아래와 같은 코드를 만들어야한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/* 1장 예시 SimDuck 참조 */</span>
</span></span><span class=line><span class=cl><span class=n>Duck</span> <span class=n>duck</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>(</span><span class=n>picnic</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>duck</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MallardDuck</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>hunting</span><span class=o>){</span>
</span></span><span class=line><span class=cl>    <span class=n>duck</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DecoyDuck</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>inBathTub</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>duck</span> <span class=o>=</span> <span class=k>new</span> <span class=n>RubberDuck</span><span class=o>();</span>    
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>이런 코드를 변경하거나 확장해야 할 때는 코드를 다시 확인하고 새로운 코드를 추가하거나 기존 코드를 제거해야 한다.</p><p>따라서 이런한 방식으로 만들면 관리와 갱신이 어려워지고 오류가 생길 가능성도 커진다.</p><h3 id=근본-원인>근본 원인</h3><p><code>new</code> 연산자로 오브젝트를 만들때 문제가 발생하는 근본적인 원인은 <strong>변화</strong> 때문이다.</p><p>인터페이스에 맞춰 코딩하면 시스템에서 일어날 수 있는 여러 변화에 대응할 수 있는 이유는 어떤 클래스든 특정 인터페이스만 구현하면 사용할 수 있는 <strong>다형성</strong> 덕뿐이다.</p><p>이와 반대로 구상 클래스를 많이 사용하면 <strong>변경에 닫혀있기 때문에</strong> 새로운 구상 클래스가 추가될 때마다 즉, 변화할 때마다 코드를 고쳐야 하므로 많은 문제가 생길 수 있다.</p><p>이 때문에 새로운 구상 형식을 써서 확장해야 할 때는 어떻게 해서든 다시 <strong>열 수 있게 만들어야 하며</strong>, 결과적으로 구상 클래스의 인스턴스 생성 부분을 분리해야 한다.</p><p>이렇게 분리되어 <strong>객체 생성을 전담하는 영역을 팩토리</strong>라고 한다.</p><h2 id=의존성-뒤집기-원칙>의존성 뒤집기 원칙</h2><blockquote><p><strong>디자인 원칙</strong><br>추상화된 것에 의존하게 만들고 구상 클래스에 의존하지 않게 만든다.</p></blockquote><p>의존성 뒤집기 원칙은 고수준 구성 요소가 저수준 구성 요소에 의존하면 안되며, 항상 추상화에 의존하게 만들어야 한다는 것을 의미한다.</p><ul><li>구현보다는 인터페이스에 맞춰 프로그래밍한다라는 원칙과 유사한 점이 많지만 의존성 뒤집기 원칙에서는 추상화를 더 많이 강조한다.</li></ul><blockquote><p>개발에서 고수준과 저수준의 기준은 기계가 이해할 수 있는가를 기준으로 설명하며, 기계쪽에 가까울수록 저수준을 의미한다.</p><ul><li>즉, 추상 클래스와 인터페이스 등을 이용한 추상화된 개념일수록 고수준이고, 컴퓨터가 해석해서 실행하게되는 코드 부분(구상 클래스)에 가까울수록 저수준이다.</li></ul></blockquote><pre class=mermaid style=text-align:center>flowchart
    a([특정 기능을 선택해야하는 요소])
    a --> b([기능 A])
    a --> c([기능 B])
    a --> d([기능 C])
    a --> e([기능 D])
</pre><p>팩토리 형식의 구현에서 위와 같이 고수준 구성 요소에서 분기를 통해 특정 구상 클래스를 직접 선택하는 형태는 저수준 요소에 의존하고 있기 때문에 구상 클래스의 종류가 추가되거나, 구상 클래스의 구현이 바뀐다면 의존하고있는 고수준 요소의 수정이 필요하다.</p><pre class=mermaid style=text-align:center>flowchart BT
  a([특정 기능을 선택해야하는 요소])
  f([기능 추상화])
  b([기능 A]) --> f
  c([기능 B]) --> f
  d([기능 C]) --> f
  e([기능 D]) --> f
  
  f <--> a
</pre><p>따라서 분기를 통해 특정 구상 클래스를 선택해야 하는 구현을 피할 수 없다면 의존성 뒤집기를 통해 구상 클래스들의 공통되는 부분들을 모아 상위 요소(인터페이스, 추상 클래스)를 만들어 의존하게 팩토리를 구성하고, 해당 기능이 필요한 요소에서 만들어진 팩토리를 의존하도록 하는 방식을 제안하고 있다.</p><h3 id=의존성-뒤집기-원칙을-지키는-방법>의존성 뒤집기 원칙을 지키는 방법</h3><p>다음 가이드라인을 따르면 의존성 뒤집기 원칙에 위배되는 객체지향 디자인을 피하는데 도움이된다.</p><ul><li>변수에 구상 클래스의 레퍼런스를 저장하지 않는다.<ul><li><code>new</code> 연산자를 사용하면 구상 클래스의 레퍼런스를 사용하게된다.</li></ul></li><li>구상 클래스에서 유도된 클래스를 만들지 않는다.<ul><li>구상클래스에서 유도된 클래스를 만들면 특정 구상 클래스에 의존하게된다.</li></ul></li><li>베이스 클래스에 이미 구현되어 있는 메소드를 오버라이드하지 않는다.<ul><li>베이스 클래스가 제대로 추상화되지 않는다. 모든 서브클래스에서 공유할 수 있는 것만 정리가 필요하다.</li></ul></li></ul><h2 id=간단한-팩토리>간단한 팩토리</h2><blockquote><p>간단한 팩토리(Simple Factory)는 디자인 패턴이라기 보다는 프로그래밍에서 자주 쓰이는 <strong>관용구</strong>에 가깝다.</p></blockquote><p>간단한 팩토리는 단순히 객체 생성 부분을 전담한다.</p><ul><li>객체 생성 부분은 공통으로 사용될 수 있기 때문에 팩토리로 캡슐화해 놓으면 구현을 변경할 때 팩토리 하나만 고치면 된다.</li></ul><pre class=mermaid style=text-align:center>classDiagram
    class Client {
        useProduct()
    }
    
    class SimpleProductFactory {
        createProduct()
    }
    
    class Product {
        << interface >>
        action()*
    }
    
    class ConcreteProductA {
        action()
    }

    class ConcreteProductB {
        action()
    }

    class ConcreteProductC {
        action()
    }
    
    Client ..|> SimpleProductFactory
    SimpleProductFactory ..> Product
    Product <|-- ConcreteProductA
    Product <|-- ConcreteProductB
    Product <|-- ConcreteProductC
</pre><ul><li>Client: 팩토리를 사용하는 클라이언트<ul><li>팩토리를 통해 Product의 구상 클래스 오브젝트를 받음</li></ul></li><li>SimplePizzaFactory: Product 객체를 참조하는 팩토리<ul><li>유일하게 구상 Product 클래스를 직접 참조함</li></ul></li><li>Product: 팩토리에서 생산하는 구상 클래스들의 인터페이스</li><li>ConcreteProduct: 팩토리에서 생산하는 제품에 해당하는 구상 클래스<ul><li>Product 인터페이스를 구현해야 한다.</li><li>구상 클래스여야 한다.</li></ul></li></ul><h3 id=최첨단-피자-가게의-문제>최첨단 피자 가게의 문제</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Pizza</span> <span class=nf>orderPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Pizza</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 인스턴스를 만드는 구상 클래스를 선택
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CheesePizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;greek&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span> <span class=o>=</span> <span class=k>new</span> <span class=n>GreekPizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;pepperoni&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PepperoniPizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>prepare</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>bake</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>cut</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>box</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><code>orderPizza()</code>에서 가장 문제가 되는 부분은 <strong>인스턴스를 만드는 구상 클래스를 선택하는 부분</strong>이다.</p><ul><li>위 코드에서 피자 가게의 메뉴를 변경하려면 직접 코드를 수정해야한다. 즉 변경에 닫혀있지 않다.</li></ul><p>변경되는 부분인 객체 생성 영역을 별도로 분리할 수 있다.</p><h3 id=최첨단-피자-가게에-적용>최첨단 피자 가게에 적용</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SimplePizzaFactory</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Pizza</span> <span class=nf>createPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>CheesePizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;greek&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>GreekPizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>type</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;pepperoni&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>PepperoniPizza</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=n>Exeption</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>PizzaStore</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>SimplePizzaFactory</span> <span class=n>factory</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Pizza</span> <span class=nf>orderPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Pizza</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>pizza</span> <span class=o>=</span> <span class=n>factory</span><span class=o>.</span><span class=na>createPizza</span><span class=o>(</span><span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>pizza</span><span class=o>.</span><span class=na>prepare</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span><span class=o>.</span><span class=na>bake</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span><span class=o>.</span><span class=na>cut</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>pizza</span><span class=o>.</span><span class=na>box</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=팩토리-메소드-패턴>팩토리 메소드 패턴</h2><blockquote><p>팩토리 메소드 패턴(Factory Method Pattern)에서는 객체를 생성할 때 필요한 인터페이스를 만든다.<br>어떤 클래스의 인스턴스를 만들지는 서브 클래스에서 결정하기 때문에 클래스 인스턴스 만드는 일을 서브 클래스에게 맡기게 된다.</p></blockquote><p>모든 팩토리 패턴은 객체 생성을 캡슐화한다.</p><p>팩토리 메소드 패턴은 팩토리를 별도 클래스로 분리하지 않고 <strong>생산 클래스 내부에 인터페이스로 팩토리 형식을 구현하도록 하여 객체 생성을 전담하는 방식으로 캡슐화를 수행</strong>한다.</p><ul><li>팩토리가 필요한 요소에서 자신의 메소드를 이용하여 팩토리를 구성하는 방식</li></ul><pre class=mermaid style=text-align:center>classDiagram
    class Creator {
        << abstract >>
        factoryMethod()*
        anOperation()
    }
    
    class ConcreteCreator {
        factoryMethod()
    }
    
    class Product {
        << abstract >>
    }
    
    class ConcreteProduct
    
    Product <|-- ConcreteProduct
    Creator <|-- ConcreteCreator
    ConcreteCreator ..|> ConcreteProduct  
</pre><ul><li>Creator: 추상 클래스로 제품으로 원하는 일을 할 때 필요한 모든 메소드가 구현됨<ul><li>하지만 제품을 만들어 주는 팩토리 메소드는 추상 메소드로 정의되어 있을 뿐 구현되어 있지 않음.</li><li>추상 메소드인 <code>factoryMethod()</code>을 서브클래스에서 직접 구현해야함.</li></ul></li><li>ConcreteCreator: 실제로 제품을 생산하는 <code>factoryMetFhod()</code>를 구현<ul><li>구상 클래스 인스턴스를 만드는 일을 책임진다.</li><li>실제 제품을 만드는 방법을 알고 있는 클래스는 이 클래스 뿐이다.</li></ul></li><li>Product: 제품 클래스로 모두 똑같은 인터페이스를 구현해야 함<ul><li>그 제품을 사용할 클래스에서 구상 클래스가 아닌 인터페이스의 레퍼런스로 객체를 참조하게 만들 수 있다.</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Creator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Product</span> <span class=nf>anOperation</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Product</span> <span class=n>product</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>product</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>factoryMethod</span><span class=o>(</span><span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=cm>/* somethimg */</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>product</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kd>abstract</span> <span class=n>Product</span> <span class=nf>factoryMethod</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Creator 추상 클래스에서 추상 메소드로 팩토리 메소드용 인터페이스(<code>factoryMethod()</code>)를 제공한다.</p><p>Creator 추상 클래스에 구현되어 있는 다른 메소드는 팩토리 메소드에 의해 생산된 제품으로 필요한 작업을 처리한다. 팩토리 메소드가 추상 메소드로 선언되었기 때문에 실제 팩토리 메소드를 구현하고 객체 인스턴스를 만드는 일은 서브클래스에서만 할 수 있다.</p><ul><li>팩토리 메소드를 추상 메소드로 선언해서 서브클래스가 객체 생성을 책임지도록 한다.<ul><li>팩토리 메소드는 클라이언트에서 실제로 생성되는 구상 객체가 무엇인지 알 수 없게 만드는 역할도 겸하게된다.</li></ul></li><li>팩토리 메소드는 특정 객체를 리턴하며, 그 객체는 보통 슈퍼클래스가 정의한 메소드 내에서 쓰인다.</li><li>매개변수로 만들 객체의 종류를 선택하게 할 수 있다.</li></ul><p>생산자 추상 클래스가 실제 생산될 인스턴스를 전혀 알 수 없고, 사용하는 서브클래스에 따라 생산되는 객체 인스턴스가 정해지기 때문에, 어떤 클래스의 인스턴스를 만들지를 서브클래스에서 결정한다고 표현한다.</p><h3 id=병렬-클래스-계층구조>병렬 클래스 계층구조</h3><pre class=mermaid style=text-align:center>classDiagram
    direction TD
    namespace 생산자 클래스 {
        class Creator {
          << abstract >>
          create()* Product
          useProduct()
        }
  
        class ConcreteCreatorA {
          create() Product
        }
  
        class ConcreteCreatorB {
          create() Product
        }
    }
    
    namespace 제품 클래스 {
      class Product {
        << abstract >>
      }

      class ConcreteProductA1
      class ConcreteProductA2
      class ConcreteProductB1
      class ConcreteProductB2
    }

    Creator <|-- ConcreteCreatorA
    Creator <|-- ConcreteCreatorB
    
    Product <|-- ConcreteProductA1
    Product <|-- ConcreteProductB1

    ConcreteProductA1 .. ConcreteProductA2
    ConcreteProductB1 .. ConcreteProductB2

    ConcreteCreatorA <--> ConcreteProductA1
    ConcreteCreatorB <--> ConcreteProductB1

    ConcreteCreatorA <--> ConcreteProductA2
    ConcreteCreatorB <--> ConcreteProductB2
</pre><ul><li>Creator: 서브클래스에서 객체를 생산하려고 구현하는 팩토리 메소드의 추상 클래스<ul><li>제품 클래스의 객체는 클래스의 서브클래스로 만들어지므로 생산자 자체는 어떤 구상 제품 클래스가 만들어질지 미리 알 수 없다.</li><li>생산자 클래스에 추상 제품 크래스에 의존하는 코드가 들어있을 때도 있다.</li></ul></li><li>ConcreteCreator: 팩토리 메소드로 해당 메소드에서 객체를 생산하는 구상 생산자.</li><li>Product: 팩토리가 생산하게 될 제품의 인터페이스</li><li>ConcreteProduct: 팩토리가 생산하게 될 제품</li></ul><p>구상 제품은 구상 생산자가 만들어야 할 많은 제품들이고, 구상 생산자 팩토리 메소드를 이용해 많은 구상 제품들 중 필요한 제품을 선택하게 된다.</p><p>이처럼 특정 구상 생산자가 팩토리 메소드로 특정 제품군을 만드는 모든 방법을 캡슐화 되어있게되는 병렬 클래스 계층 구조를 가지게 된다.</p><h3 id=간단한-팩토리와-차이점>간단한 팩토리와 차이점</h3><p>간단한 팩토리는 특정 생산자에서만 사용할 수 있는 반면, 팩토리 메소드 패턴은 더 유연하고 재사용 가능한 설계를 할 수 있다.</p><ul><li>생산자 클래스의 서브 클래스로 어떤 구상 제품을 만들지 결정하기 때문에 생성하는 제품을 마음대로 변경하기 쉽다.</li><li>추상 클래스의 내부 메소드 구현을 통해 동작을 일반화하여 여러 번 재사용이 가능한 프레임워크를 만들 수 있다.</li></ul><h3 id=피자-가게-프레임워크-만들기>피자 가게 프레임워크 만들기</h3><p>팩토리 메소드 패턴을 통해 다양한 팩토리를 구성할 수 있고, 이를 통해 특색있는 피자 가게 지점을 만들 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>dough</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>sauce</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>toppings</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>prepare</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;준비중: &#34;</span> <span class=o>+</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;도우 만들기...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;소스 뿌리기...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;토핑 올리기:&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=n>String</span> <span class=n>topping</span> <span class=o>:</span> <span class=n>toppings</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34; &#34;</span> <span class=o>+</span> <span class=n>topping</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>bake</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;굽기&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>cut</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;자르기&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>box</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;담기&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>NYStyleCheesePizza</span> <span class=kd>extends</span> <span class=n>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>NYStyleCheesePizza</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s>&#34;뉴욕 스타일 치즈 피자&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>dough</span> <span class=o>=</span> <span class=s>&#34;씬 크러스트&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>sauce</span> <span class=o>=</span> <span class=s>&#34;마리나라&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>toppings</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;레지아노 치즈&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ChicagoStyleCheesePizza</span> <span class=kd>extends</span> <span class=n>Pizza</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=nf>NYStyleCheesePizza</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s>&#34;시카고 스타일 치즈 피자&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>dough</span> <span class=o>=</span> <span class=s>&#34;두꺼운 크러스트&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>sauce</span> <span class=o>=</span> <span class=s>&#34;플럼 토마토&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>toppings</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;모짜렐라 치즈&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@java.lang.Override</span>
</span></span><span class=line><span class=cl>  <span class=kt>void</span> <span class=nf>cut</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;네모난 모양으로 자르기&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>PizzaStore</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=n>Pizza</span> <span class=nf>orderPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Pizza</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span> <span class=o>=</span> <span class=n>cratePizza</span><span class=o>(</span><span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>prepare</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>bake</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>cut</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>pizza</span><span class=o>.</span><span class=na>box</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>pizza</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>protected</span> <span class=kd>abstract</span> <span class=n>Pizza</span> <span class=nf>createPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>NYPizzaStore</span> <span class=kd>extends</span> <span class=n>PizzaStore</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Pizza</span> <span class=nf>createPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>item</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>new</span> <span class=n>NYStyleCheesePizza</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ChicagoPizzaStore</span> <span class=kd>extends</span> <span class=n>PizzaStore</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Pizza</span> <span class=nf>createPizza</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>item</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>new</span> <span class=n>ChicagoStyleCheesePizza</span><span class=o>(</span><span class=s>&#34;cheese&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=추상-팩토리-패턴>추상 팩토리 패턴</h2><blockquote><p>구상 클래스에 의존하지 않고도 서로 연관되거나 의존적인 객체로 이루어진 제품군을 생산하는 인터페이스를 제공한다.<br>구상 클래스는 서브클래스에서 만들게된다.</p></blockquote><p>추상 팩토리 패턴을 사용하면 클라이언트에서 추상 인터페이스로 일련의 제품을 공급받을수 있다.</p><p>이때, 실제로 어떤 제품이 생산되는지는 전혀 알 필요가 없다. 따라서 클라이언트와 팩토리에서 생산되는 제품을 분리할 수 있게된다.</p><pre class=mermaid style=text-align:center>classDiagram
    direction TD
    class Client {
        
    }
    
    class AbstractFactory {
        << interface >>
        CreateProductA()*
        CreateProductB()*
    }
    
    class ConcreteFactory1 {
        CreateProductA()
        CreateProductB()
    }

    class ConcreteFactory2 {
      CreateProductA()
      CreateProductB()
    }
    
    class AbstractProductA {
        << interface >>
    }
    
    class ProductA1 {
        
    }
    
    class ProductA2 {
        
    }
    
    class AbstractProductB {
        << interface >>
    }
    
    class ProductB1 {
        
    }
    
    class ProductB2 {
        
    }

    Client --> AbstractFactory
    
    Client --> AbstractProductA
    Client --> AbstractProductB

    AbstractFactory <|-- ConcreteFactory1
    AbstractFactory <|-- ConcreteFactory2

    AbstractProductA <|-- ProductA1
    AbstractProductA <|-- ProductA2
  
    AbstractProductB <|-- ProductB1
    AbstractProductB <|-- ProductB2

    ConcreteFactory1 --> ProductA1
    ConcreteFactory1 --> ProductB1

    ConcreteFactory2 --> ProductA2
    ConcreteFactory2 --> ProductB2
</pre><p>추상 팩토리가 일련의 제품을 만드는 데 쓰이는 인터페이스를 정의하려고 만들어졌기 때문에 추상 팩토리 패턴의 메소드가 팩토리 메소드로 구현되는 경우도 종종 있다.</p><p>해당 인터페이스에 있는 각 메소드는 구상 제품을 생산하는 일을 맡고, 추상 팩토리의 서브클래스를 만들어서 각 메소드의 구현을 제공하게된다.</p><h2 id=팩토리-패턴-활용법>팩토리 패턴 활용법</h2><p>어떤 패턴을 쓰든 객체 생성을 캡슐화해서 애플리케이션의 결함을 느슨하게 만드록, 특정 구현에 덜 의존하도록 만들 수 있다.</p><p>팩토리 메소드 패턴, 추상 팩토리 패턴 모두 애플리케이션을 특정 구현으로부터 분리하는 역할을 하지만 방법이 다르기때문에 용도에 맞게 활용한다.</p><ul><li>팩토리 메소드 패턴: 클라이언트 코드와 인스턴스를 만들어야 할 구상 클래스를 분리시켜야 할 때 유용하다.<ul><li>클래스를 써서 제품을 만든다.<ul><li>상속을 이용하여 객체를 만든다.</li></ul></li><li>서브클래스로 객체를 만들기 위해 클래스를 확장하고 팩토리 메소드를 오버라이드해야 한다.<ul><li>자신이 사용할 추상 형식만 알면 되므로 클라이언트와 구상 형식을 분리하게된다.</li></ul></li><li>한 가지 제품만 생산하므로 복잡한 인터페이스도 필요하지 않고 메소드도 하나만 있으면 된다.</li></ul></li><li>추상 팩토리 패턴: 클라이언트에서 서로 연관된 일련의 제품을 만들어야 할 때, 즉 제품군을 만들어야 할 때 활용하기 좋다.<ul><li>객체를 써서 제품을 만든다.<ul><li>객체 구성(composition)을 이용하여 객체를 만든다.</li></ul></li><li>제품군을 만드는 추상 형식을 제공하고 제품이 생상되는 방법을 이 형식의 서브클래스에서 정의한다.<ul><li>팩토리를 사용하려면 인스턴스를 만든 다음 추상 형식을 써서 만든 코드에 전달하는 방식으로 클라이언트와 구상 제품을 분리한다.</li><li>제품군에 제품을 추가하는 드으이 관련 제품을 확대해야 할 경우에 인터페이스를 바꿔야한다.</li><li>많은 제품들을 포함하는 제품 군을 생성하기 때문에 인터페이스가 아주 큰 편이다.</li></ul></li></ul></li></ul><h2 id=디자인-도구상자-안에-들어가야할-도구들>디자인 도구상자 안에 들어가야할 도구들</h2><ul><li>객체지향 원칙<ul><li>추상화된 것에 의존하게 만드록 구상 클래스에 의존하지 않게 만든다.</li></ul></li><li>추상 팩토리 패턴<ul><li>구상 클래스에 의존하지 않고도 서로 연관되거나 의존적인 객체로 이루어진 제품군을 생성하는 인터페이스를 제공한다.</li><li>구상 클래스는 서브클래스에서 만든다.</li></ul></li><li>팩토리 메소드 패턴<ul><li>객체를 생성할 때 필요한 인터페이스를 만든다.</li><li>어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정한다.</li><li>팩토리 메소드를 사용하면 인스턴스 만드는 일을 서브클래스에 맡길 수 있다.</li></ul></li></ul><h2 id=핵심-정리>핵심 정리</h2><ul><li>팩토리를 쓰면 객체 생성을 캡슐화할 수 있다.</li><li>간단한 팩토리는 엄밀하게 말해서 디자인 패턴은 아니지만, 클라이언트와 구상 클래스를 분리하는 간단한 기법으로 활용할 수 있다.</li><li>팩토리 메소드 패턴은 상속을 활용한다.<ul><li>객체 생성을 서브클래스에게 맡기고, 서브클래스는 팩토리 메소드를 구현해서 객체를 생산한다.</li></ul></li><li>추상 팩토리 패턴은 객체 구성을 활용한다.<ul><li>팩토리 인터페이스에서 선언한 메소드에서 객체 생성이 구현된다.</li></ul></li><li>모든 팩토리 패턴은 애플리케이션의 구상 클래스 의존성을 줄여줌으로써 느슨한 결합을 도와준다.</li><li>팩토리 메소드 패턴은 특정 클래스에서 인스턴스를 만드는 일을 서브클래스에게 넘긴다.</li><li>추상 팩토리 패턴은 구상 클래스에 직접 의존하지 않고도 서로 관련된 객체로 이루어진 제품군을 만드는 용도로 쓰인다.</li><li>의존성 뒤집기 윈칙을 따르면 구상 형식 의존을 피하고 추상화를 지향할 수 있다.</li><li>팩토리는 구상 클래스가 아닌 추상 클래스와 인터페이스에 맞춰서 코딩할 수 있게 해주는 강력한 기법이다.</li></ul></section><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
</script><footer class=article-footer><section class=article-tags><a href=/tags/common/>Common</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://product.kyobobook.co.kr/detail/S000001810483 target=_blank rel=noopener><div class=article-details><h2 class=article-title>헤드 퍼스트 디자인 패턴</h2><footer class=article-time>교보 문고</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/gof/3/><div class=article-image><img src=/post/gof/3/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 3. 데코레이터 패턴" data-key=gof/3 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>3. 데코레이터 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/2/><div class=article-image><img src=/post/gof/2/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 2. 옵저버 패턴" data-key=gof/2 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>2. 옵저버 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/1/><div class=article-image><img src=/post/gof/1/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 1. 디자인 패턴 소개와 전략 패턴" data-key=gof/1 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>1. 디자인 패턴 소개와 전략 패턴</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>