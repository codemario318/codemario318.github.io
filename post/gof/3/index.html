<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="헤드 퍼스트 디자인 패턴"><title>3. 데코레이터 패턴</title><link rel=canonical href=https://codemario318.github.io/post/gof/3/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="3. 데코레이터 패턴"><meta property="og:description" content="헤드 퍼스트 디자인 패턴"><meta property="og:url" content="https://codemario318.github.io/post/gof/3/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Common"><meta property="article:published_time" content="2023-10-02T14:29:08+09:00"><meta property="article:modified_time" content="2023-10-02T14:29:08+09:00"><meta property="og:image" content="https://codemario318.github.io/post/gof/3/cover.png"><meta name=twitter:title content="3. 데코레이터 패턴"><meta name=twitter:description content="헤드 퍼스트 디자인 패턴"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/gof/3/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-K99591YLGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K99591YLGK",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3183752545292673" crossorigin=anonymous></script><meta name=naver-site-verification content="2315bde85c86f66092140cc465c340a2170f3187"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/boostcamp/><span>부스트캠프</span>
<span class=content-count>11</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>71</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>1</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>22</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/nest/><span>Nest</span>
<span class=content-count>1</span></a></li><li><a href=/categories/network/><span>네트워크</span>
<span class=content-count>1</span></a></li><li><a href=/categories/node/><span>Node</span>
<span class=content-count>1</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>5</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#데코레이터-패턴>데코레이터 패턴</a><ol><li><a href=#ocpopen-close-principle-살펴보기>OCP(Open-Close Principle) 살펴보기</a></li><li><a href=#데코레이터-패턴-살펴보기>데코레이터 패턴 살펴보기</a></li><li><a href=#데코레이터-패턴의-정의>데코레이터 패턴의 정의</a></li><li><a href=#데코레이터의-상속과-구성>데코레이터의 상속과 구성</a></li><li><a href=#데코레이터의-단점>데코레이터의 단점</a></li></ol></li><li><a href=#초대형-커피-전문점-스타버즈>초대형 커피 전문점, 스타버즈</a><ol><li><a href=#최초-주문-시스템>최초 주문 시스템</a></li><li><a href=#상속을-이용한-개선>상속을 이용한 개선</a></li><li><a href=#상속을-이용한-개선의-문제점>상속을 이용한 개선의 문제점</a></li><li><a href=#데코레이터-패턴-적용하기>데코레이터 패턴 적용하기</a></li><li><a href=#berverage-클래스-장식하기>Berverage 클래스 장식하기</a></li><li><a href=#커피-주문-시스템-코드-만들기>커피 주문 시스템 코드 만들기</a></li></ol></li><li><a href=#핵심-정리>핵심 정리</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/gof/3/><img src=/post/gof/3/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_800x0_resize_box_3.png srcset="/post/gof/3/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_800x0_resize_box_3.png 800w, /post/gof/3/cover_hu5fe9e632d31d6204170abf166c9a2927_244577_1600x0_resize_box_3.png 1600w" width=800 height=966 loading=lazy alt="Featured image of post 3. 데코레이터 패턴"></a></div><div class=article-details><header class=article-category><a href=/categories/headfirstdesignpatterns/>헤드 퍼스트 디자인 패턴</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/gof/3/>3. 데코레이터 패턴</a></h2><h3 class=article-subtitle>헤드 퍼스트 디자인 패턴</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2023/10/02</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>9 minute read</time></div></footer></div></header><section class=article-content><p>데코레이터 패턴은 객체 작성이라는 형식으로 실행 중에 클래스를 꾸미는 방법이다.</p><p>데코레이터 패턴을 활용하면 기존 클래스 코드를 바꾸지 않고도 객체에 새로운 임무를 추가할 수 있다.</p><h2 id=데코레이터-패턴>데코레이터 패턴</h2><p>데코레이터 패턴은 기존 코드를 건드리지 않고 확장으로 새로운 행동을 추가하는 것이 목적이다. 이를 통해 새로운 기능을 추가할 때 급변하는 주변 환경에 작 적응하는 유연하고 튼튼한 디자인을 만들 수 있다.</p><h3 id=ocpopen-close-principle-살펴보기>OCP(Open-Close Principle) 살펴보기</h3><blockquote><p>클래스는 확장에는 열려있어야 하지만 변경에는 닫혀 있어야 한다.</p></blockquote><p>확정에는 열려있고 변경에는 닫혀있다는 것은 모순처럼 보일 수 있으나 코드를 변경하지 않아도 시스템을 확장하게 해 주는 객체지향 기법은 많다.(ex. 옵저버 패턴)</p><p>데코레이터 패턴도 이 중 하나로 확장하려고 코드를 직접 수정하는 일을 방지하는 방법을 제공한다.</p><blockquote><p>모든 부분에서 OCP를 준수하는 것은 불가능하다.<br>OCP를 준수하는 객체지향 디자인을 만들려면 많은 노력이 필요하고, 디자인의 모든 부분을 깔끔하게 정돈할 만큼 여유가 있는 상황도 흔치 않다(굳이 그렇게 할 필요가 없다).<br>따라서 디자인한 것 중에서 가장 바뀔 가능성이 높은 부분을 중점적으로 살펴보고 OCP를 적용하는 방법이 가장 좋다.</p></blockquote><p>코드에서 확장해야 할 부분을 선택할 때는 세심한 주의가 필요하다.</p><ul><li>무조건 OCP를 적용한다면 쓸데없는 일을 하며 시간을 낭비할 수 있다.</li><li>필요 이상으로 복잡하고 이해하기 힘든 코드를 만드렉 될 수 있다.</li></ul><h3 id=데코레이터-패턴-살펴보기>데코레이터 패턴 살펴보기</h3><p>이후 예시에서 설명할 스타버즈에서 음료 가격과 첨가물 가격을 합해 총 가격을 산출하는 방법은 좋은 방법이 아니었다.</p><ul><li>클래스가 매우 많아진다.</li><li>일부 서브클래스에는 적합하지 않은 기능을 추가해야 한다.</li></ul><p>일단 기본 단위에서 시작하여 추가되는 요소들로 최소 단위를 장식(decorate)하는 방법을 고려할 수 있다.</p><ol><li>가장 기본이 되는 객체를 가져온다.</li><li>추가되는 요소들로 장식한다.</li><li>최종 결과물을 만들어내는 메소드를 호출한다.<ul><li>추가 요소들의 결과를 만드는 일은 해당 객체에게 위임한다.</li></ul></li></ol><p>데코레이터 패턴은 위와 같은 방식을 추가되는 요소 객체로 래핑하는 방식으로 구현한다.</p><ul><li>데코레이터의 슈퍼클래스는 자신이 장식하고 있는 객체의 슈퍼클래스와 같다.</li><li>한 객체를 여러개의 데코레이터로 감쌀 수 있다.</li><li>데코레이터는 자신이 감싸고 있는 객체와 같은 슈퍼클래스를 가지고 있기에 원래 객체가 들어갈 자리에 데코레이터 객체를 넣어도 상관없다.</li><li><strong>데코레이터는 자신이 장식하고 있는 객체에게 어떤 행동을 위임하는 일 말고도 추가 작업을 수행할 수 있다.</strong></li><li>객체는 언제든 감쌀 수 있으므로 실행 중에 필요한 데코레이터를 마음대로 적용할 수 있다.</li></ul><h3 id=데코레이터-패턴의-정의>데코레이터 패턴의 정의</h3><blockquote><p>데코레이터 패턴으로 객체에 추가 요소를 동적으로 더할 수 있다.<br>데코레이터를 사용하면 서브클래스를 만들 때보다 훨씬 유연하게 기능을 확장할 수 있다.</p></blockquote><pre class=mermaid style=text-align:center>classDiagram
    class Component {
        methodA()
        methodB()
    }
    
    class ConcreteComponent {
        methodA()
        methodB()
    }
    
    class Decorator {
        Component wrappedObj
        
        methodA()
        methodB()
    }
    
    class ConcreteDecoratorA {
        methodA()
        methodB()
        newBehavior()
    }

    class ConcreteDecoratorB {
        Object newState
        
        methodA()
        methodB()
        newBehavior()
    }

    Component <-- ConcreteComponent
    Component <-- Decorator
    Component <.. Decorator : 구성 요소

    Decorator <-- ConcreteDecoratorA
    Decorator <-- ConcreteDecoratorB
</pre><ul><li>Component: 각 구성 요소는 직접 쓰일 수 있고 데코레이터에 감싸여 쓰일 수도 있다.</li><li>ConcreteComponent: 새로운 행동을 동적으로 추가한다.</li><li>Decorator: 자신이 장식할 구성 요소와 같은 인터페이스 또는 추상 클래스를 구현한다.<ul><li>각 데코레이터 안에는 Component 객체가 들어있어야 하므로 구성 요소의 레퍼런스를 포함한 인스턴스 변수가 있다.</li></ul></li><li>ConcreteDecorator: 데코레이터가 감싸고 있는 Component 객체용 인스턴스 변수가 있으며 Component의 상태를 확장할 수 있다.<ul><li>데코레이터가 사로운 메소드를 추가할 수도 있으나 일반적으로 새로운 메소드를 추가하는 대신 Component에 원래 있던 메소드를 별도의 작업으로 처리하여 새로운 기능을 추가한다.</li></ul></li></ul><h3 id=데코레이터의-상속과-구성>데코레이터의 상속과 구성</h3><p>데코레이터에서는 전략 패턴처럼 구성을 이용하여 행동을 분리하지 않고, 데코레이터로 감싸는 객체의 형식과 같게 구성하여, 상속을 통해 형식을 맞추게 된다.</p><ul><li>상속으로 행동을 물려받지 않고, 어떠한 구성 요소를 가지고 데코레이터를 만들 때 새로운 행동을 추가한다.<ul><li>추상 클래스, 인터페이스 등으로 형식을 맞추고 상속을 통해 행동을 구현하도록 하여 구성을 이용하게 된다.</li></ul></li><li>데코레이터를 감싸기 위해 만든 인스턴스 변수에 저장되는 데코레이터에 행동을 구현하여 할당하는 방식으로 구성을 이용한다.</li><li>객체의 구성(인스턴스 변수로 다른 객체를 저장하는 방식)을 이용하고 있으므로, 데코레이터가 다양하게 추가되어도 유연성을 잃지 않을 수 있게 된다.<ul><li>상속만 써야 했다면 행동이 컴파일 시 슈퍼클래스에서 받은 것과 코드로 오버라이드 한 것만 쓸수 있게 정적으로 결정되어 버린다.</li><li>데코레이터가 감싼 데코레이터의 동작을 구현하는 것으로 구성을 활용하면 실행 중에 원하는 데코레이터를 마음대로 조합해서 사용할 수 있다.</li></ul></li></ul><h3 id=데코레이터의-단점>데코레이터의 단점</h3><p><strong>java.io 패키지</strong></p><p><code>java.io</code> 패키지는 파일에서 데이터를 읽어오는 스트림에 기능을 더하는 데코레이터를 사용하는 객체로 구성되어 있어 굉장히 많은 클래스가 있다.</p><p>추상 데코레이터 클래스(추상 구성 요소) 역할을 수행하는 <code>InputStream</code>을 꾸미는 <code>FilterInputStream</code>와 <code>FilterInputStream</code>를 꾸미는 <code>BufferedInputStream</code>, <code>ZipInputStream</code> 을 꾸미는 형식으로 계속 확장하는 방식으로 설계되어 있다.</p><pre class=mermaid style=text-align:center>flowchart BT
    a[InputStream]

   aa[FileInputStream]
   b[StringBufferInputStream]
   c[ByteArrayInputStream]
   d[FilterInputStream]
   
   e[PushbackInputStream]
   f[BufferedInputStream]
   g[DataInputStream]
   h[InflatorInputStream]
   
   i[ZipInputStream]

    i --> h
    
    e --> d
    f --> d
    g --> d
    h --> d
   
    aa --> a
    b --> a
    c --> a
    d --> a
</pre><p>결과적으로 만들어져 있는 많은 클래스들이 <code>InputSteram</code>을 감싸 주는 래퍼 클래스로 작동하게 된다.</p><hr><ol><li><p>잡다한 클래스가 너무 많아진다.</p><ul><li>데코레이터가 어떤 식으로 작동하는지 이해하면 다른 사람이 구현한 데코레이터 패턴을 활용해도 개발하기 쉽다.<ul><li>잘 모든다면 활용하기 어렵다.</li><li>클래스가 어떤 식으로 구성되어 있는지를 먼저 파악해야 사용하기 쉽다.</li></ul></li></ul></li><li><p>특정 형식에 의존하는 코드에 데코레이터 패턴을 적용하면 엉망이 될 수 있다.</p><ul><li>데코레이터의 장점인 <strong>데코레이터를 끼워 넣어도 클라이언트는 데코레이터를 사용하고 있다는 사실을 전혀 알 수 없다</strong>는 장점을 누릴 수 없다.</li></ul></li><li><p>구성 요소를 초기화하는 데 필요한 코드가 훨씬 복잡해진다.</p><ul><li>구성 요소 인스턴스만 만든다고 끊나지 않고 많은 데코레이터로 감싸야 하는 경우가 있다.</li></ul></li><li><p>구상 구성 요소로 어떤 작업을 처리하는 코드에 데코레이터 패턴을 적용하면 코드가 제대로 작동하지 않고, 반대로 추상 구성 요소로 돌아가는 코드에는 데코레이터 패턴을 적용해야만 제대로된 결과를 얻을 수 있다.</p><ul><li>구상 구성 요소로 돌아가는 코드를 만들어야 한다면 데코레이터 패턴 사용을 다시 한번 생각해봐야한다.</li></ul></li><li><p>데코레이터 패턴을 쓰면 관리해야 할 객체가 늘어나므로 실수할 가능성도 높아질 수 있다.</p><ul><li>실제로는 팩토리나 빌더 같은 다른 패턴으로 데코레이터를 만들고 사용하게된다.</li><li>이러한 패턴을 배운다면 데코레이터로 장식된 구상 구성 요소는 캡슐화가 잘 되므로 실수할 가능성을 줄이게된다.</li></ul></li></ol><h2 id=초대형-커피-전문점-스타버즈>초대형 커피 전문점, 스타버즈</h2><h3 id=최초-주문-시스템>최초 주문 시스템</h3><pre class=mermaid style=text-align:center>classDiagram
    class Beverage {
        description
        
        getDescription()
        cost()
    }
    
    class HouseBlend {
        cost()
    }
    
    class DarkRoast {
        cost()
    }
    
    class Decaf {
        cost()
    }
    
    class Espresso {
        cost()
    }

    Beverage <-- HouseBlend
    Beverage <-- DarkRoast 
    Beverage <-- Decaf
    Beverage <-- Espresso
</pre><ul><li>Beverage: 음료를 나타내는 추상 클래스<ul><li>매장에서 판매되는 모든 음료는 이 클래스의 서브클라스임</li><li>description: 각 서브클래스에서 설정되는 음료 설명</li><li>cost(): 추상메소드로서 서브클래스에서 구현해야함</li></ul></li></ul><h3 id=상속을-이용한-개선>상속을 이용한 개선</h3><p>고객이 커피를 주문할 때 우유나 두유, 모카 등 추가 항목을 얹기도 하므로 그때마다 가격이 올라가야한다.</p><p>각각에 대응하는 서브클래스를 만드는 방법도 있지만, 인스턴스 변수와 슈퍼클래스 상속을 통해 개선될 수 있다.</p><pre class=mermaid style=text-align:center>classDiagram
    class Beverage {
        description
        +milk
        +soy
        +mocha
        +whip
        
        getDescription()
        cost()
        
        +has...()
        +set...()
    }

    class HouseBlend {
        cost()
    }

    class DarkRoast {
        cost()
    }

    class Decaf {
        cost()
    }

    class Espresso {
        cost()
    }

    Beverage <-- HouseBlend
    Beverage <-- DarkRoast
    Beverage <-- Decaf
    Beverage <-- Espresso 
</pre><h3 id=상속을-이용한-개선의-문제점>상속을 이용한 개선의 문제점</h3><p>각각 옵션에 대응하는 서브클래스를 만드는 방법보다는 나은 방법이지만 여전히 문제점은 존재한다.</p><ul><li>첨가물 가격이 바뀔 때마다 기존 코드를 수정해야한다.</li><li>첨가물의 종류가 많아지면 새로운 메소드를 추가해야 하고, 슈퍼클래스의 cost() 메소드도 고쳐야한다.</li><li>특정 첨가물이 들어가면 안되는 음료가 추가된다면 막는 작업이 필요하다. 등</li></ul><h3 id=데코레이터-패턴-적용하기>데코레이터 패턴 적용하기</h3><p>다크로스트에 모카, 휘핑 추가를 수행하게 될 경우 아래와 같은 과정을 거쳐야한다.</p><ol><li>DarkRoast 객체에서 시작한다.</li><li>Mocha 객체를 만들고 그 객체로 DarkRoast 객체를 감싼다.</li><li>Whip 데코레이터를 만들어 Mocha를 감싼다.</li><li>가격을 계산한다.<ul><li>가장 바깥쪽에 있는 데코레이터인 Whip의 cost()를 호출한다.</li><li>Whip은 장식하고 있는 객체에게 가격 계산을 위임하고, 가격이 구해지면 계산된 가격에 휘핑크림의 가격을 더한 다음 결과값을 리턴한다.</li></ul></li></ol><h3 id=berverage-클래스-장식하기>Berverage 클래스 장식하기</h3><pre class=mermaid style=text-align:center>classDiagram
    class Beverage {
        description

        getDescription()
        cost()
    }

    class HouseBlend {
        cost()
    }

    class DarkRoast {
        cost()
    }

    class Decaf {
        cost()
    }

    class Espresso {
        cost()
    }
    
    Beverage <-- HouseBlend
    Beverage <-- DarkRoast
    Beverage <-- Decaf
    Beverage <-- Espresso

    class CondimentDecorator {
        getDescription()
    }

    Beverage <-- CondimentDecorator
    Beverage <.. CondimentDecorator : 구성 요소

    class Milk {
        Beverage beverage

        cost()
        getDescription()
    }

    class Mocha {
        Beverage beverage

        cost()
        getDescription()
    }

    class Soy {
        Beverage beverage

        cost()
        getDescription()
    }

    class Whip {
        Beverage beverage

        cost()
        getDescription()
    }
    
    CondimentDecorator <-- Milk
    CondimentDecorator <-- Mocha
    CondimentDecorator <-- Soy
    CondimentDecorator <-- Whip
</pre><h3 id=커피-주문-시스템-코드-만들기>커피 주문 시스템 코드 만들기</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Beverage</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>description</span> <span class=o>=</span> <span class=s>&#34;제목 없음&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>description</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=kt>double</span> <span class=nf>cost</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * Beverage 객체가 들어갈 자리에 들어갈 수 있어야 하므로 Beverage 클래스를 확장한다.
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>CondimentDecorator</span> <span class=kd>extends</span> <span class=n>Beverage</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데코레이터가 감쌀 음료를 나타내는 Beverage 객체를 지정한다.
</span></span></span><span class=line><span class=cl><span class=cm>     * 음료를 지정할 때는 데코레이터에서 어떤 음료든 감쌀 수 있도록 슈퍼 클래스 유형을 이용한다.
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=n>Beverage</span> <span class=n>beverage</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>abstract</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * Beverage 객체를 확장하여 기본 음료를 만든다.
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Espresso</span> <span class=kd>extends</span> <span class=n>Beverage</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Espresso</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>description</span> <span class=o>=</span> <span class=s>&#34;에스프레소&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@java.lang.Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>cost</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mf>1.99</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * CondimentDecorator를 확장하여 데코레이터를 만든다.
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Mocha</span> <span class=kd>extends</span> <span class=n>CondimentDecorator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 감싸고자 하는 음료를 저장하는 데코레이터 인스턴스 변수를 초기화 한다.
</span></span></span><span class=line><span class=cl><span class=cm>     * @param beverage
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Mocha</span><span class=o>(</span><span class=n>Beverage</span> <span class=n>beverage</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>beverage</span> <span class=o>=</span> <span class=n>beverage</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@java.lang.Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDescription</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>beverage</span><span class=o>.</span><span class=na>getDescription</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;, 모카&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@java.lang.Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>double</span> <span class=nf>cost</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>beverage</span><span class=o>.</span><span class=na>cost</span><span class=o>()</span> <span class=o>+</span> <span class=mf>.20</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=핵심-정리>핵심 정리</h2><ul><li>객체지향 원칙<ul><li>+ 클래스는 확장에는 열려있어야 하지만 변경에는 닫혀 있어야 한다(OCP).</li></ul></li><li>객체지향 패턴<ul><li>+ 데코레이터 패턴<ul><li>객체에 추가 요소를 동적으로 더할 수 있다.</li><li>서브클래스를 만들 때보다 훨씬 유연하게 기능을 확장할 수 있다.</li></ul></li></ul></li></ul><hr><ul><li>디자인의 유연성 면에서 보면 상속으로 확장하는 일은 별로 좋은 선택은 아니다.</li><li>기존 코드 수정 없이 행동을 확장해야 하는 상황도 있다.</li><li>구성과 위임으로 실행 중에 새로운 행동을 추가할 수 있다.</li><li>상속 대신 데코레이터 패턴으로 행동을 확장할 수 있다.</li><li>데코레이터 패턴은 구상 구성 요소를 감싸 주는 데코레이터를 사용한다.</li><li>데코레이터 클래스의 형식은 그 클래스가 감싸는 클래스 형식을 반영한다.<ul><li>상속이나 인터페이스 구현으로 자신이 감쌀 클래스와 같은 형식을 가진다.</li></ul></li><li>데코레이터는 자기가 감싸고 있는 구성 요소의 새로운 기능을 더함으로써 행동을 확장한다.</li><li>구성 요소를 감싸는 데코레이터의 개수에는 제한이 없다.</li><li>구성 요소의 클라이언트는 데코레이터의 존재를 알 수 없다.<ul><li>클라이언트가 구성 요소의 구체적인 형식에 의존하는 경우는 예외</li></ul></li><li>데코레이터 패턴을 사용하면 자잘한 객체가 매우 많이 추가될 수 있다.<ul><li>데코레이터를 너무 많이 사용하면 코드가 필요 이상으로 복잡해진다.</li></ul></li></ul></section><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
</script><footer class=article-footer><section class=article-tags><a href=/tags/common/>Common</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://product.kyobobook.co.kr/detail/S000001810483 target=_blank rel=noopener><div class=article-details><h2 class=article-title>헤드 퍼스트 디자인 패턴</h2><footer class=article-time>교보 문고</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/gof/10/><div class=article-image><img src=/post/gof/10/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 10. 객체의 상태 바꾸기 - 상태 패턴" data-key=gof/10 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>10. 객체의 상태 바꾸기 - 상태 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/9/><div class=article-image><img src=/post/gof/9/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 9. 컬렉션 잘 관리하기 - 반복자 패턴과 컴포지트 패턴" data-key=gof/9 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>9. 컬렉션 잘 관리하기 - 반복자 패턴과 컴포지트 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/8/><div class=article-image><img src=/post/gof/8/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 8. 알고리즘 캡슐화하기 - 탬플릿 메소드 패턴" data-key=gof/8 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>8. 알고리즘 캡슐화하기 - 탬플릿 메소드 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/7/><div class=article-image><img src=/post/gof/7/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 7. 어댑터 패턴과 퍼사드 패턴" data-key=gof/7 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>7. 어댑터 패턴과 퍼사드 패턴</h2></div></a></article><article class=has-image><a href=/post/gof/6/><div class=article-image><img src=/post/gof/6/cover.5a69346fc08fc01c93d4735bb058551a_hu5fe9e632d31d6204170abf166c9a2927_244577_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 6. 커맨드 패턴 - 호출 캡슐화하기" data-key=gof/6 data-hash="md5-Wmk0b8CPwByT1HNbsFhVGg=="></div><div class=article-details><h2 class=article-title>6. 커맨드 패턴 - 호출 캡슐화하기</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>