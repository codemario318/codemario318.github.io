<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="데이터 중심 애플리케이션 설계"><title>2.3 데이터 모델과 질의 언어 - 그래프형 데이터 모델</title><link rel=canonical href=https://codemario318.github.io/post/designing-data-intensive-application/2/3/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="2.3 데이터 모델과 질의 언어 - 그래프형 데이터 모델"><meta property="og:description" content="데이터 중심 애플리케이션 설계"><meta property="og:url" content="https://codemario318.github.io/post/designing-data-intensive-application/2/3/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="데이터 중심 어플리케이션 설계"><meta property="article:tag" content="Designing Data-Intensive Application"><meta property="article:tag" content="소프트웨어"><meta property="article:tag" content="Software"><meta property="article:tag" content="소프트웨어 공학"><meta property="article:tag" content="Software Engineering"><meta property="article:tag" content="아키텍처"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="소프트웨어 아키텍처"><meta property="article:tag" content="Software Architecture"><meta property="article:tag" content="시스템 설계"><meta property="article:tag" content="System Design"><meta property="article:published_time" content="2025-02-16T15:56:49+09:00"><meta property="article:modified_time" content="2025-02-16T15:56:49+09:00"><meta property="og:image" content="https://codemario318.github.io/post/designing-data-intensive-application/2/3/cover.png"><meta name=twitter:title content="2.3 데이터 모델과 질의 언어 - 그래프형 데이터 모델"><meta name=twitter:description content="데이터 중심 애플리케이션 설계"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/designing-data-intensive-application/2/3/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-K99591YLGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K99591YLGK",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3183752545292673" crossorigin=anonymous></script><meta name=naver-site-verification content="2315bde85c86f66092140cc465c340a2170f3187"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/boostcamp/><span>부스트캠프</span>
<span class=content-count>11</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>73</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>1</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>22</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/nest/><span>Nest</span>
<span class=content-count>1</span></a></li><li><a href=/categories/network/><span>네트워크</span>
<span class=content-count>1</span></a></li><li><a href=/categories/node/><span>Node</span>
<span class=content-count>5</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>5</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#그래프형-데이터-모델>그래프형 데이터 모델</a><ol><li><a href=#속성-그래프>속성 그래프</a></li><li><a href=#사이퍼-질의-언어>사이퍼 질의 언어</a></li><li><a href=#sql의-그래프-질의>SQL의 그래프 질의</a></li><li><a href=#트리플-저장소와-스파클>트리플 저장소와 스파클</a></li><li><a href=#시맨틱-웹>시맨틱 웹</a></li><li><a href=#rdf-데이터-모델>RDF 데이터 모델</a></li><li><a href=#스파클-질의-언어>스파클 질의 언어</a></li><li><a href=#초석-데이터로그>초석: 데이터로그</a></li></ol></li><li><a href=#정리>정리</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/designing-data-intensive-application/2/3/><img src=/post/designing-data-intensive-application/2/3/cover_hu03451f961cb1218aaf8d95eea6944999_534781_800x0_resize_box_3.png srcset="/post/designing-data-intensive-application/2/3/cover_hu03451f961cb1218aaf8d95eea6944999_534781_800x0_resize_box_3.png 800w, /post/designing-data-intensive-application/2/3/cover_hu03451f961cb1218aaf8d95eea6944999_534781_1600x0_resize_box_3.png 1600w" width=800 height=1050 loading=lazy alt="Featured image of post 2.3 데이터 모델과 질의 언어 - 그래프형 데이터 모델"></a></div><div class=article-details><header class=article-category><a href=/categories/common/ style=background-color:#2a9d8f;color:#fff>Common</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/designing-data-intensive-application/2/3/>2.3 데이터 모델과 질의 언어 - 그래프형 데이터 모델</a></h2><h3 class=article-subtitle>데이터 중심 애플리케이션 설계</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2025/02/16</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>15 minute read</time></div></footer></div></header><section class=article-content><h2 id=그래프형-데이터-모델>그래프형 데이터 모델</h2><p>애플리케이션이 주로 일대다 관계(트리 구조 데이터)이거나 레코드 간 관계가 없다면 문서 모델이 적합하다.</p><p>하지만 데이터에서 다대다 관계가 매우 일반적이라면 어떻게 해야 할까? 관게형 모델은 <strong>단순한 다대다 관계</strong>를 다룰 수 있지만, 데이터 간 연결이 더 복잡해지면 그래프로 데이터를 모델링하기 시작하는 편이 더
자연스럽다.</p><p>그래프는 두 유형의 객체로 이뤄지며 이를 통해 많은 유형의 데이터를 그래프로 모델링할 수 있다.</p><ul><li>정점(vertex)(노드, 엔티티)</li><li>간선(edge)(관계, 호(arc))</li></ul><p>일반적인 예는 다음과 같다.</p><ul><li>소셜 그래프<ul><li>정점은 사람, 간선은 사람들이 알고 있음을 나타냄</li></ul></li><li>웹 그래프<ul><li>정점은 웹 페이지, 간선은 다른 페이지에 대한 링크</li></ul></li><li>도로나 철도 네트워크<ul><li>정점은 교차로, 간선은 도로나 철로</li></ul></li></ul><p>하지만 그래프는 정점이 모든 같은 유형인 형식, 동종 데이터에 국한되지 않는다. 그래프를 동종 데이터와 마찬가지 방식으로 사용하면 단일 데이터 저장소에 완전히 다른 유형의 객체를 일관성 있게 저장할 수 있는 강력한
방법을 제공한다.</p><ul><li>페이스북<ul><li>정점: 사람, 장소, 이벤트, 체크인, 사용자가 작성한 코멘드 등</li><li>간선:<ul><li>어떤 사람이 서로 친구인지</li><li>어떤 위치에서 체크인이 발생했는지</li><li>누가 어떤 포스트에 코멘트를 했는지</li><li>누가 이벤트에 참여했는지 등</li></ul></li></ul></li></ul><h3 id=속성-그래프>속성 그래프</h3><p>그래프에서 데이터를 구조화하고 질의하는 몇 가지 다른(하지만 관련된) 방법이 있다.</p><p>속성 그래프 모델에서 각 정점은 다음과 같은 요소로 구성된다.</p><ul><li>고유한 식별자</li><li>유출(outgoing) 간선 집합</li><li>유입(incoming) 간선 집합</li><li>속성 컬렉션(키-값 쌍)</li></ul><p>각 간선은 다음과 같은 요소로 구성된다.</p><ul><li>고유한 식별자</li><li>간선이 시작하는 정점(꼬리 정점)</li><li>간선이 끝나는 정점(머리 정점)</li><li>두 정점 간 관계 유형을 설명하는 레이블</li><li>속성 컬렉션(키-값 쌍)</li></ul><p>아래와 같이 두 개의 관계형 테이블(하나는 정점, 하나는 간선)로 구성된 그래프 저장소를 생각해보면, 머리와 꼬리 정점은 각 간선마다 저장된다. 따라서 정점을 위한 유입 간선과 유출 간선의 집합이 필요하다면
<code>edges</code> 테이블에 <code>head_vertex</code>나 <code>tail_vertex</code>로 각각 질의할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>vertices</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>vertex_id</span><span class=w>  </span><span class=nb>integer</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>properties</span><span class=w> </span><span class=n>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>edges</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>edge_id</span><span class=w>     </span><span class=nb>integer</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>tail_vertex</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>vertices</span><span class=w> </span><span class=p>(</span><span class=n>vertex_id</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>head_vertex</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>vertices</span><span class=w> </span><span class=p>(</span><span class=n>vertex_id</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>label</span><span class=w>       </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>properties</span><span class=w>  </span><span class=n>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>edges_tails</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=w> </span><span class=p>(</span><span class=n>tail_vertex</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>edges_heads</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=w> </span><span class=p>(</span><span class=n>head_vertex</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 모델의 몇 가지 중요한 면은 다음과 같다.</p><ul><li>정점은 다른 정점과 간선으로 연결된다.<ul><li>특정 유형과 관련 여부를 제한하는 스키마는 없다.</li></ul></li><li>정점이 주어지면 정점의 유입과 유출 간선을 효율적으로 찾을 수 있고 그래프를 순회할 수 있다.<ul><li>일련의 정점을 따라 앞뒤 방향으로 순회한다.</li><li>이를 위해 <code>tali_vertex</code>와 <code>head_vertex</code> 컬럼에 대해 색인을 생성했다.</li></ul></li><li>다른 유형의 관계에 서로 다른 레이블을 사용하면 단일 그래프에 다른 유형의 정보를 저장하면서도 데이터 모델을 깔끔하게 유지할 수 있다.</li></ul><p>이러한 기능을 통해 그래프는 데이터 모델링을 위한 많은 유연성을 제공한다.</p><p><img src=/post/designing-data-intensive-application/2/3/img.png width=925 height=564 srcset="/post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_480x0_resize_box_3.png 480w, /post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_1024x0_resize_box_3.png 1024w" loading=lazy alt="그래프 구조 데이터" class=gallery-image data-flex-grow=164 data-flex-basis=393px></p><p>위 그림에서 전통적인 관계형 스키마에서 표현하기 어려운 사례 몇 가지를 살펴볼 수 있다.</p><ul><li>국가마다 다른 지역 구조<ul><li>프랑스에서는 주(departement)와 도(region)</li><li>미국에서는 군(country)과 주(state)</li></ul></li></ul><p>위 예시에서 루시와 알랭 또는 그 밖의 사람에 대한 다른 여러 사실을 포함시키기 위해 그래프를 확장해야한다면, 새로운 관심사를 정점으로 만들고 연결하기만 하면 된다.</p><p>그래프는 발전성이 좋아서 애플리케이션에 기능을 추가하는 경우 애플리케이션의 데이터 구조 변경을 수용하게끔 그래프를 쉽게 확장할 수 있다.</p><h3 id=사이퍼-질의-언어>사이퍼 질의 언어</h3><p>사이퍼(Cypher)는 속성 그래프를 위한 선언형 질의 언어로, Neo4j 그래프 데이터베이스용으로 만들어졌다.</p><p><img src=/post/designing-data-intensive-application/2/3/img.png width=925 height=564 srcset="/post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_480x0_resize_box_3.png 480w, /post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_1024x0_resize_box_3.png 1024w" loading=lazy alt="그래프 구조 데이터" class=gallery-image data-flex-grow=164 data-flex-basis=393px></p><p>사이퍼로 왼쪽 부분을 그래프 데이터베이스로 삽입하려면 아래와 같은 질의가 필요하다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>CREATE
</span></span><span class=line><span class=cl>    (NAmerica:Location {name:&#39;North America&#39;, type:&#39;continent&#39;}),
</span></span><span class=line><span class=cl>    (USA:Location
</span></span><span class=line><span class=cl>    (Idaho:Location
</span></span><span class=line><span class=cl>    (Lucy:Person
</span></span><span class=line><span class=cl>    (Idaho) -[:WITHIN]-&gt;  (USA)  -[:WITHIN]-&gt; (NAmerica),
</span></span><span class=line><span class=cl>    (Lucy)  -[:BORN_IN]-&gt; (Idaho)
</span></span></code></pre></td></tr></table></div></div><p>각 정점에는 USA나 Idaho 같은 상징적인 이름이 지정돼있고, 질의의 다른 부분에서 이 이름을 사용해 정점간 간선을 화살표 표기를 사용해 만들 수 있다.</p><hr><p><strong>미국에서 유럽으로 이민 온 모든 사람들의 이름 찾기</strong></p><p>더 정확하게 말하면 미국 내 위치의 <code>BORN_IN</code> 간선을 가진 정점과 유럽 내 위치의 <code>LIVING_IN</code> 간선을 갖는 모든 정점을 찾아서 이 정점들의 <code>name</code> 속성을 반호나하는 문제이다.</p><p><code>MATCH</code> 문에서는 같은 화살표 표기를 이용해 그래프에서 패턴을 찾는다.</p><p><code>(person) -[:BORN_IN]-> ()</code>는 <code>BORN_IN</code> 레이블을 가진 간선과 관련된 두 정점을 찾는다. 이 간선의 꼬리 정점은 <code>person</code> 변수에 묶여 있고 머리 정점은 명기하지 않는 채로
남아있게된다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>MATCH
</span></span><span class=line><span class=cl>    (person) -[:BORN_IN]-&gt;  () -[:WITHIN*0..]-&gt; (us:Location {name:&#39;United States&#39;}),
</span></span><span class=line><span class=cl>    (person) -[:LIVES_IN]-&gt; () -[:WITHIN*0..]-&gt; (eu:Location {name:&#39;Europe&#39;}) 
</span></span><span class=line><span class=cl>RETURN person.name
</span></span></code></pre></td></tr></table></div></div><ol><li><code>person</code>은 어떤 정점을 향하는 <code>BORN_IN</code> 유출 간선을 가지며, 이 정점에서 <code>name</code> 속성이 &ldquo;United States"인 <code>Location</code> 유형의 정점에 도달할 때까지 일련의 <code>WITHIN</code>
유출 간선을 따라간다.</li><li>같은 <code>person</code>의 정점은 <code>LIVES_IN</code> 유출 간선도 가지는데, 이 간선과 <code>WITHIN</code> 유출 간선을 따라가면 결국 <code>name</code> 속성이 &ldquo;Europe"인 <code>Location</code> 유형의 정점에
도달하게된다.</li><li>각 <code>person</code> 정점마다 <code>name</code> 속성을 반환한다.</li></ol><p>질의를 실행하는 데는 여러 가지 방법이 있다.</p><ul><li>데이터베이스에서 모든 사람을 홅어보는 작업을 시작으로 사람들의 출생지와 거주지를 확인해 기준에 맞는 사람들만 반환</li><li>두 개의 <code>Location</code> 정점에서 시작해 반대 방향으로 수행<ul><li><code>name</code> 속성에 색인이 있다면 미국과 유럽을 나타내는 두 개의 정점을 효율적으로 찾을 수 있음</li><li><code>WITHIN</code> 유입 간선을 따라겨 미국과 유럽의 모든 위치 찾기를 진행</li><li>위치를 나타내는 정점 중 하나에서 <code>BORN_IN</code>이나 <code>LIVE_IN</code> 유입 간선을 통해 발견된 사람을 구함</li></ul></li></ul><p>보통 선언형 질의 언어는 질의를 작성할 때 이처럼 수행에 대해 자세히 지정할 필요가 없다. 질의 최적화기가 가장 효율적이라고 예측한 전략을 자동으로 선택하므로 작성자는 나머지 애플리케이션만 작성하면 된다.</p><h3 id=sql의-그래프-질의>SQL의 그래프 질의</h3><p>위에서 언급한 것 처럼 관계형 데이터베이스에서 그래프 데이터를 표현할 수 있음을 제안하였다.</p><p>그래프를 관계형 구조로 넣어도 SQL을 통해 질의할 수 있지만, <strong>어렵다</strong>. 관계형 데이터베이스에서는 대개 질의에 필요한 조인을 미리 알고 있는데, 그래프 질의에서는 찾고자 하는 정점을 찾기 전에 가변적인 여러
간선을 순회해야하기 때문이다.</p><ul><li>미리 조인 수를 고정할 수 없다.</li></ul><p>예제에서 간선 순회는 사이퍼 질의의 <code>() -[:WITHIN*0..]-> ()</code> 문에서 발생한다.</p><ul><li><code>person</code>의 <code>LIVES_IN</code> 간선은 위치 유형(거리, 도시, 지구, 군, 주 등)을 가리킨다.</li><li>각각 &ldquo;도시 -> 군 -> 주 -> 주 -> 국가&rdquo; 순으로 <code>WITHIN</code> 간선으로 이어진다.
<code>LIVES_IN</code> 간선은 찾고자 하는 위치 정점을 직접 가르킬 수 있으나 위치 계층 구조에서 제거된 일부 수준일 수도 있다.</li></ul><p>사이퍼에서 <code>:WITHIN*0..</code>은 0회 이상 <code>WITHIN</code> 간선을 따라가라는 의미로 이를 간결하게 표현한다.</p><p>SQL:1999 이후 가변 순회 경로에 대한 질의 개념은 <strong>재귀 공통 테이블 식</strong>(recursive common table expression, <code>WITH RECURSIVE</code>)을 사용해서 표현할 수 있지만
사이퍼와 비교했을 때 문법이 어렵다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>WITH</span><span class=w> </span><span class=k>RECURSIVE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- in_usa is the set of vertex IDs of all locations within the United States
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>in_usa</span><span class=p>(</span><span class=n>vertex_id</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>vertex_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span><span class=k>FROM</span><span class=w> </span><span class=n>vertices</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span><span class=k>WHERE</span><span class=w> </span><span class=n>properties</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;name&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;United States&#39;</span><span class=w> </span><span class=c1>-- 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                          </span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span><span class=k>SELECT</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>tail_vertex</span><span class=w> </span><span class=c1>-- 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                          </span><span class=k>FROM</span><span class=w> </span><span class=n>edges</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                   </span><span class=k>JOIN</span><span class=w> </span><span class=n>in_usa</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>head_vertex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>in_usa</span><span class=p>.</span><span class=n>vertex_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                          </span><span class=k>WHERE</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>label</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;within&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- in_europe is the set of vertex IDs of all locations within Europe
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>in_europe</span><span class=p>(</span><span class=n>vertex_id</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>vertex_id</span><span class=w> </span><span class=c1>-- 3 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                             </span><span class=k>FROM</span><span class=w> </span><span class=n>vertices</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=k>WHERE</span><span class=w> </span><span class=n>properties</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;name&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Europe&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=k>SELECT</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>tail_vertex</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=k>FROM</span><span class=w> </span><span class=n>edges</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                      </span><span class=k>JOIN</span><span class=w> </span><span class=n>in_europe</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>head_vertex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>in_europe</span><span class=p>.</span><span class=n>vertex_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                             </span><span class=k>WHERE</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>label</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;within&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- born_in_usa is the set of vertex IDs of all people born in the US
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>born_in_usa</span><span class=p>(</span><span class=n>vertex_id</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>tail_vertex</span><span class=w> </span><span class=c1>-- 4
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                               </span><span class=k>FROM</span><span class=w> </span><span class=n>edges</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                        </span><span class=k>JOIN</span><span class=w> </span><span class=n>in_usa</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>head_vertex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>in_usa</span><span class=p>.</span><span class=n>vertex_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                               </span><span class=k>WHERE</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>label</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;born_in&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- lives_in_europe is the set of vertex IDs of all people living in Europe
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=n>lives_in_europe</span><span class=p>(</span><span class=n>vertex_id</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>tail_vertex</span><span class=w> </span><span class=c1>-- 5
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>                                   </span><span class=k>FROM</span><span class=w> </span><span class=n>edges</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                            </span><span class=k>JOIN</span><span class=w> </span><span class=n>in_europe</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>head_vertex</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>in_europe</span><span class=p>.</span><span class=n>vertex_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                   </span><span class=k>WHERE</span><span class=w> </span><span class=n>edges</span><span class=p>.</span><span class=n>label</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;lives_in&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>vertices</span><span class=p>.</span><span class=n>properties</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;name&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>vertices</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- join to find those people who were both born in the US *and* live in Europe 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>         </span><span class=k>JOIN</span><span class=w> </span><span class=n>born_in_usa</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>vertices</span><span class=p>.</span><span class=n>vertex_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>born_in_usa</span><span class=p>.</span><span class=n>vertex_id</span><span class=w> </span><span class=c1>-- 6
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>         </span><span class=k>JOIN</span><span class=w> </span><span class=n>lives_in_europe</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>vertices</span><span class=p>.</span><span class=n>vertex_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>lives_in_europe</span><span class=p>.</span><span class=n>vertex_id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>name</code> 속성이 &ldquo;United States"인 정점을 찾아 <code>in_usa</code> 정점 집합의 첫 번째 엘리먼트로 만든다.</li><li><code>in_usa</code> 집합의 모든 정점들의 모든 <code>within</code> 유입 간선을 따라가 같은 집합에 추가한다.<ul><li>모든 <code>within</code> 간선을 방문할 때까지 수행한다.</li></ul></li><li><code>name</code> 속성이 &ldquo;Europe"인 정점을 시작으로 동일하게 수행해 <code>in_europe</code> 집합을 만든다.</li><li>미국에서 태어난 사람을 찾기 위해 <code>in_usa</code> 집합의 각 정점에 대해 <code>born_in</code> 유입 간선을 따라간다.</li><li>비슷하게 유럽에서 사는 사람을 찾기 위해 <code>in_europe</code> 집합의 각 정점에 대해 <code>lives_in</code> 유입 간선을 따라간다.</li><li>마지막으로 조인을 이용해 미국에서 태어난 사람 집합과 유럽에서 사는 사람 집합의 교집합을 구한다.</li></ul><hr><p>동일한 질의를, cypher는 4줄로 작성하고, SQL은 29줄로 작성해야 한다. 이는 다양한 데이터 모델이 서로 다른 사용 사례를 만족하기 위해 설계되었다는 사실을 반증한다.</p><p>따라서 애플리케이션에 적합한 데이터 모델 선택 작업은 중요하다.</p><h3 id=트리플-저장소와-스파클>트리플 저장소와 스파클</h3><p>트리플 저장소 모델은 속성 그래프 모델과 거의 동등하다.</p><p>이 모델은 같은 생각을 다른 용어를 사용해 설명한다. 그럼에도 애플리케이션 구축에 유용한 도구일지도 모를 트리플 저장소를 위한 ㄷ양한 도구와 언어가 있기 때문에 논의할 만한 가치가 있다.</p><p>트리플 저장소에서는 모든 정보를 <strong>주어</strong>(subject), <strong>서술어</strong>(predicate), 목적어(object) 처럼 매우 간단한 <strong>세 부분 구문</strong>(three-part statements) 형식으로
저장한다.</p><p>트리플의 주어는 그래프의 정점과 종등하며, 목적어는 두 가지중 하나이다.</p><ul><li>문자열이나 숫자 같은 원시 데이터타입의 값<ul><li>트리플의 서술어와 목적어는 주어 정점에서 속성의 키, 값과 동등하다.</li><li>(루시, 나이, 33)은 <code>{"age":33}</code> 속성을 가진 정점 lucy와 같다.</li></ul></li><li>그래프의 다른 정점<ul><li>서술어는 그래프의 간선이고 주어는 꼬리 정점이며 목적어는 머리 정점이다.</li><li>(루시, 결혼하다, 알랭)에서 주어와 목적어인 루시와 알랭은 정점이고, 서술어 결혼하다는 두 정점을 잇는 간선의 레이블이다.</li></ul></li></ul><p><img src=/post/designing-data-intensive-application/2/3/img.png width=925 height=564 srcset="/post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_480x0_resize_box_3.png 480w, /post/designing-data-intensive-application/2/3/img_hue7842d50d38e3b2e6ac6ca2ece9154d3_90342_1024x0_resize_box_3.png 1024w" loading=lazy alt="그래프 구조 데이터" class=gallery-image data-flex-grow=164 data-flex-basis=393px></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-turtle data-lang=turtle><span class=line><span class=cl><span class=k>@prefix</span><span class=w> </span><span class=nn>:</span><span class=w> </span><span class=nv>&lt;urn:example:&gt;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>lucy</span><span class=w>     </span><span class=kt>a</span><span class=w>       </span><span class=nn>:</span><span class=nt>Person</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>lucy</span><span class=w>     </span><span class=nn>:</span><span class=nt>name</span><span class=w>   </span><span class=s>&#34;Lucy&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>lucy</span><span class=w>     </span><span class=nn>:</span><span class=nt>bornIn</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=w>    </span><span class=kt>a</span><span class=w>       </span><span class=nn>:</span><span class=nt>Location</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=w>    </span><span class=nn>:</span><span class=nt>name</span><span class=w>   </span><span class=s>&#34;Idaho&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=w>    </span><span class=nn>:</span><span class=nt>type</span><span class=w>   </span><span class=s>&#34;state&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=w>    </span><span class=nn>:</span><span class=nt>within</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=w>      </span><span class=kt>a</span><span class=w>       </span><span class=nn>:</span><span class=nt>Location</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=w>      </span><span class=nn>:</span><span class=nt>name</span><span class=w>   </span><span class=s>&#34;United States&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=w>      </span><span class=nn>:</span><span class=nt>type</span><span class=w>   </span><span class=s>&#34;country&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=w>      </span><span class=nn>:</span><span class=nt>within</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=w> </span><span class=kt>a</span><span class=w>       </span><span class=nn>:</span><span class=nt>Location</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=w> </span><span class=nn>:</span><span class=nt>name</span><span class=w>   </span><span class=s>&#34;North America&#34;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=w> </span><span class=nn>:</span><span class=nt>type</span><span class=w>   </span><span class=s>&#34;continent&#34;</span><span class=p>.</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>위 예제는 그림의 일부를 보여주며 <strong>터틀</strong>(Turtle) 형식의 트리플로 작성되었다.(터틀은 <strong>Notation3</strong>(N3)의 부분 집합이다.)</p><p>그래프의 정점을 <code>_:someName</code>으로 작성했는데 이 파일 외부의 것을 의미하지 않는다, <code>_:someName</code>은 트리플이 같은 정점을 참조하는지 달리 알지 못하기 때문에 존재한다.</p><p>서술어가 간선을 나타내면 목적어는 <code>_:usa :within _:usa</code> 처럼 정점이 되고, 서술어가 속성이라면 목적어는 <code>_:usa :name "United States"</code> 처럼 문자열 리터럴이된다.</p><p>동일한 주어를 반복하는 작업은 단순 반복 작업으로, 세미콜론을 사용해 동일한 주어에 대해 여러 경우를 잘 표한할 수 있게되어 터틀 형식을 읽기 쉽게 만든다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-turtle data-lang=turtle><span class=line><span class=cl><span class=k>@prefix</span><span class=w> </span><span class=nn>:</span><span class=w> </span><span class=nv>&lt;urn:example:&gt;</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>lucy</span><span class=w>     </span><span class=kt>a</span><span class=w> </span><span class=nn>:</span><span class=nt>Person</span><span class=p>;</span><span class=w>   </span><span class=nn>:</span><span class=nt>name</span><span class=w> </span><span class=s>&#34;Lucy&#34;</span><span class=p>;</span><span class=w>          </span><span class=nn>:</span><span class=nt>bornIn</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>idaho</span><span class=w>    </span><span class=kt>a</span><span class=w> </span><span class=nn>:</span><span class=nt>Location</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>name</span><span class=w> </span><span class=s>&#34;Idaho&#34;</span><span class=p>;</span><span class=w>         </span><span class=nn>:</span><span class=nt>type</span><span class=w> </span><span class=s>&#34;state&#34;</span><span class=p>;</span><span class=w>   </span><span class=nn>:</span><span class=nt>within</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>usa</span><span class=w>      </span><span class=kt>a</span><span class=w> </span><span class=nn>:</span><span class=nt>Location</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>name</span><span class=w> </span><span class=s>&#34;United States&#34;</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>type</span><span class=w> </span><span class=s>&#34;country&#34;</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>within</span><span class=w> </span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>_</span><span class=nn>:</span><span class=nt>namerica</span><span class=w> </span><span class=kt>a</span><span class=w> </span><span class=nn>:</span><span class=nt>Location</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>name</span><span class=w> </span><span class=s>&#34;North America&#34;</span><span class=p>;</span><span class=w> </span><span class=nn>:</span><span class=nt>type</span><span class=w> </span><span class=s>&#34;continent&#34;</span><span class=p>.</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=시맨틱-웹>시맨틱 웹</h3><p>트리플 저장소에 관한 내용을 읽다보면 <strong>시맨틱 웹</strong>관련 기사들을 많이 접할 수 있지만, 트리플 저장소 데이터 모델은 시맨틱 웹과는 완전히 독립적이다.</p><p>하지만 많은 사람들이 이 둘이 매우 밀접한 관계가 있다고 생각하기때문에 간략화게 논의할 필요가 있다.</p><p>시맨틱 웹은 즉 웹 사이트는 이미 사람이 읽을 수 있는 텍스트와 그림으로 정보를 게시하고 있으니 <strong>컴퓨터가 읽게끔 기계가 판독 가능한 데이터로도 정보를 게시하는 건 어떨까</strong>?라는 개념이다.</p><p><strong>자원 기술 프레임워크(Resource Description Framework, RDF)</strong> 는 서로 다른 웹 사이트가 일관된 형식으로 데이터를 게시하기 위한 방법을 제안한다.</p><p>RDF는 서로 다른 웹 사이트의 데이터가 일종의 전 인터넷 &ldquo;만물 데이터베이스(database of everything)&ldquo;인 <strong>데이터 웹(web of data)</strong> 에 자동으로 결함할 수 있게 한다.</p><p>시맨틱 웹은 2000년대 초반에 과대평가됐고 지금까지 현실에서 실현된 흔적이 없어 많은 사람이 부정적인 견해를 보였다.</p><ul><li>어지러운 약어의 과잉과 지나치게 복잡한 표준 제안, 자만심으로 어려움을 겪었다.</li></ul><p>하지만 이런 단점들이 있음에도 시맨틱 웹 프로젝트에서 유래한 좋은 작업이 많이 있으며, 시맨틱 웹에서 RDF 데이터를 게시하는 일어 관심이 없다고 하더라도 트리플은 <strong>애플리케이션의 훌륭한 내부 데이터 모델</strong>이 될
수 있다.</p><h3 id=rdf-데이터-모델>RDF 데이터 모델</h3><p>터틀 언어는 RDF 데이터를 사람이 읽을 수 있는 형식으로 표현한다. XML 형식으로 쓰기도 하지만, XML 형식은 같은 내용을 훨씬 장황하게 만든다.</p><p>한눈에 쉽게 보기 위해서는 터틀/N3를 선호하며 아파치 제나 같은 도구는 필요한 경우 서로 다른 RDF 형식으로 자동 변환할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;rdf:RDF</span> <span class=na>xmlns=</span><span class=s>&#34;urn:example:&#34;</span>
</span></span><span class=line><span class=cl>         <span class=na>xmlns:rdf=</span><span class=s>&#34;http://www.w3.org/1999/02/22-rdf-syntax-ns#&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;Location</span> <span class=na>rdf:nodeID=</span><span class=s>&#34;idaho&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;name&gt;</span>Idaho<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;type&gt;</span>state<span class=nt>&lt;/type&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;within&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;Location</span> <span class=na>rdf:nodeID=</span><span class=s>&#34;usa&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;name&gt;</span>United States<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;type&gt;</span>country<span class=nt>&lt;/type&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;within&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;Location</span> <span class=na>rdf:nodeID=</span><span class=s>&#34;namerica&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;name&gt;</span>North America<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;type&gt;</span>continent<span class=nt>&lt;/type&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;/Location&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/within&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/Location&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/within&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/Location&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;Person</span> <span class=na>rdf:nodeID=</span><span class=s>&#34;lucy&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;name&gt;</span>Lucy<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;bornIn</span> <span class=na>rdf:nodeID=</span><span class=s>&#34;idaho&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/Person&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/rdf:RDF&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>RDF는 인터넷 전체의 데이터 교환을 위해 설계했기 때문에 약간 이상한 점이 있다.</p><p>첫 번째로 트리플의 주어, 서술어, 목적어는 주로 URI다.</p><p>서술어는 <code>WITHIN</code>이나 <code>LIVES_IN</code>이 아니라 <code>&lt;http://my-company.com/namespace#within></code>, <code>&lt;http://my-company.com/namespace#lives_in></code>
같은 URL일 수 있는데, 이러한 설계의 배경은 데이터를 다른 사람의 데이터와 결합하기 위함이다.</p><p>만약 <code>within</code>이나 <code>lives_in</code> 단어에 다른 의미를 붙이면 서술어는 <code>&lt;http://other.org/foo#within></code>, <code>&lt;http://other.org/foo#lives_in></code>이므로 충돌이
발생하지 않게된다.</p><p>두 번째로 URL은 반드시 실제 접속 가능한 주소일 필요는 없다는 점으로, RDF의 관점에서는 하나의 네임 스페이스를 의미할 뿐이다.</p><h3 id=스파클-질의-언어>스파클 질의 언어</h3><p>스파클(SPARQL)은 RDF 데이터 모델을 사용한 트리플 저장소 질의 언어이다.(SPARQL Protocol and RDF Query Language)</p><p>스파클을 사이퍼보다 먼저 만들었고 사이퍼의 패턴 매칭을 스파클에서 차용했기 때문에 매우 유사해보인다.</p><p>앞에서 살펴본 무국에서 유럽으로 이주한 사람을 찾는 질의는 사이퍼보다 스파클에서 더욱 간결해진다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>PREFIX : &lt;urn:example:&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SELECT ?personName
</span></span><span class=line><span class=cl>WHERE {
</span></span><span class=line><span class=cl>    ?person :name ?personName.
</span></span><span class=line><span class=cl>    ?person :bornIn / :within* / :name &#34;United States&#34;.
</span></span><span class=line><span class=cl>    ?person :livesIn / :within* / :name &#34;Europe&#34;.
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>구조는 매우 유사하며 다음 두 표현식은 동등하다.</p><ul><li>스파클에서 변수는 물음표로 시작</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>(person) -[:BORN_IN]-&gt; () -[:WITHIN*0..]-&gt; (location)   # Cypher
</span></span><span class=line><span class=cl>?person :bornIn / :within* ?location.                   # SPARQL
</span></span></code></pre></td></tr></table></div></div><p>RDF는 속성과 간선을 구별하지 않고 서술어만 사용하기 때문에 속성 매칭을 위해 동일한 구문을 사용할 수 있다.</p><p>다음 표현식에 따르면 <code>usa</code> 변수는 문자열 값이 <code>"United States"</code>인 <code>name</code> 속성을 가진 모든 정점이어야 한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>(usa {name:&#39;United States&#39;})   # Cypher
</span></span><span class=line><span class=cl>?usa :name &#34;United States&#34;.    # SPARQL
</span></span></code></pre></td></tr></table></div></div><p>스파클은 훌륭한 질의 언어로 시멘틱 웹이 아니더라도 애플리케이션이 내부적으로 사용하는 강력한 도구가 될 수 있다.</p><h3 id=초석-데이터로그>초석: 데이터로그</h3><p><strong>데이터로그(Datalog)</strong> 는 스파클이나 사이퍼보다 훨씬 오래된 언어로 1980년대 학계에서 광범위하게 연구되었다.</p><p>소프트웨어 엔지니어 사이에서는 잘 알려져 있지 않지만 그럼에도 중요한 이유는 이후 질의 언어의 기반이 되는 초석을 제공하기 때문이다.</p><p>데이터로그의 데이터 모델은 트리플 저장소 모델과 유사하지만 조금 더 일반화되었다.</p><ul><li><code>(주어, 서술어, 목적어)</code>로 트리플을 작성하는 대신 <code>서술어(주어, 목적어)</code>로 작성한다.</li></ul><p>지금까지 예시로 주어졌던 데이터를 데이터로그로 표현아면 아래와 같다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>name(namerica, &#39;North America&#39;).
</span></span><span class=line><span class=cl>type(namerica, continent).
</span></span><span class=line><span class=cl>name(usa, &#39;United States&#39;).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>type(usa, country).
</span></span><span class=line><span class=cl>within(usa, namerica).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>name(idaho, &#39;Idaho&#39;).
</span></span><span class=line><span class=cl>type(idaho, state).
</span></span><span class=line><span class=cl>within(idaho, usa).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>name(lucy, &#39;Lucy&#39;).
</span></span><span class=line><span class=cl>born_in(lucy, idaho).
</span></span></code></pre></td></tr></table></div></div><p>데이터를 위와 같이 정의했다면, 데이터로그를 이용해서 이전과 동일한 질의를 작성할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>within_recursive(Location, Name) :- name(Location, Name). /* Rule 1 */
</span></span><span class=line><span class=cl>within_recursive(Location, Name) :- within(Location, Via), /* Rule 2 */ within_recursive(Via, Name).
</span></span><span class=line><span class=cl>migrated(Name, BornIn, LivingIn) :- name(Person, Name), /* Rule 3 */ born_in(Person, BornLoc),
</span></span><span class=line><span class=cl>                                    within_recursive(BornLoc, BornIn),
</span></span><span class=line><span class=cl>                                    lives_in(Person, LivingLoc),
</span></span><span class=line><span class=cl>                                    within_recursive(LivingLoc, LivingIn).
</span></span></code></pre></td></tr></table></div></div><p>사이퍼와 스파클은 <code>SELECT</code>로 바로 질의하는 반면 데이터로그는 단계를 나눠 한 번에 조금씩 질의로 나아간다.</p><p>먼저 새로운 서술어를 데이터베이스에 전달하는 <strong>규칙(rule)</strong> 을 정의한다.</p><ul><li>이 예제에서는 <code>within_recursive</code>와 <code>migrated</code> 두 개를 새로 정의</li></ul><p>서술어는 데이터베이스에 저장된 트리플이 아니며, 데이터나 다른 규칙으로 부터 파생되며, 규칙(rule)은 함수가 다른 함수를 호출하거나 재귀적으로 자신을 호출하는 것 처럼 다른 규칙을 참조할 수 있다.</p><ul><li>이처럼 복잡한 질의를 작은 부분으로 나눠 차례차례 구성할 수 있다.</li></ul><p>규칙에서 대문자로 시작하는 단어는 변수이고 서술어는 사이퍼와 스파클의 서술어와 대응된다.</p><ul><li><code>name(Location, Name)</code>은 변수 <code>Location = namerica</code>, <code>Name = 'North America'</code>를 가진 트리플 <code>name(namerica, 'North America')</code>에 대응</li></ul><p>시스템이 <code>:-</code> 연산자의 오른편에 있는 모든 서술어의 대응을 찾으면 규칙이 적용된다. 규칙이 적용될 때 <code>:-</code>의 왼편이 데이터베이스에 추가된다.(변수는 대응된 값으로 대체)</p><p>다음은 이 규칙을 적용할 수 있는 방법 중 하나다.</p><ol><li>데이터베이스에 <code>name(namerica, 'North America')</code>가 존재하면 규칙 1을 적용하고, 규칙 1은 <code>within_recursive(namerica, 'North America')</code>를 생성한다.</li><li>데이터베이스에 <code>within(usa, namerica)</code>가 존재하고 이전 단계에서 <code>within_recursive(namerica, 'North America')</code>를 생성했으면 규칙 2를 적용한다. 규칙 2는 <code>within_recursive(usa, 'North America')</code>를 생성한다.</li><li>데이터베이스에 <code>within(idaho, usa)</code>가 존재하고 이전 단계에서 <code>within_recursive(usa, 'North America')</code>를 생성했으면 규칙 2를 적용한다. 규칙 2는 <code>within_recursive(idaho, 'North America')</code>를 생성한다.</li></ol><p><code>within_recursive</code> 서술어는 규칙 1과 2를 반복 적용해 데이터베이스에 포함된 북아메리카(또는 다른 장소 이름)의 모든 위치를 찾을 수 있다.</p><p><img src=/post/designing-data-intensive-application/2/3/img_1.png width=923 height=312 srcset="/post/designing-data-intensive-application/2/3/img_1_hucbf885bc5c024331c2bd06108b34aaca_93746_480x0_resize_box_3.png 480w, /post/designing-data-intensive-application/2/3/img_1_hucbf885bc5c024331c2bd06108b34aaca_93746_1024x0_resize_box_3.png 1024w" loading=lazy alt="데이터로그 규칙을 사용해 아이다호가 북아메리카에 있는지 확인" class=gallery-image data-flex-grow=295 data-flex-basis=710px></p><p>이제 규칙 3으로 특정 <code>LivingIn</code> 장소에 살면서 특정 <code>BornIn</code> 장소에서 태어난 사람을 찾을 수 있다.</p><p>질의는 <code>BornIn = 'United State'</code>와 <code>LivingIn = 'Europe'</code>이고 변수 <code>Who</code>에 사람을 남기게 한 다음 데이터로그 시스템에 어떤 값이 변수 <code>Who</code>에 나타날 수 있는지 물어본 후 최종적으로 이전 사이퍼나 스파클 질의와 같은 답을 얻는다.</p><p>데이터로그 접근 방식은 이번 장에서 이전에 설명한 질의 언어와는 다른 사고가 필요하지만 다른 질의 규칙을 결합하거나 재사용할 수 있기 때문에 매우 강력한 접근 방식이다.</p><p>간단한 일회성 질의에 사용하기는 편리하지 않지만 데이터가 복잡하면 더 효과적으로 대체할 수 있다.</p><h2 id=정리>정리</h2><p>데이터 모델은 광범위한 주제다. 이번 장에서는 다양한 종류의 모델을 간략하게 살펴봤다.</p><p>역사적으로 데이터를 하나의 큰 트리(계층 모델)로 표현하려고 노력했지만 <strong>다대다 관계를 표현하기에는 트리 구조가 적절하지 않았다.</strong> 이 문제를 해결하기 위해 <strong>관계형 모델</strong>이 고안되었으며, 최근 개발자들은 관계형 모델에도 적합하지 않은 애플리케이션이 있다는 사실을 발견했다.</p><p>새롬게 등장한 비관계형 데이터 저장소인 <strong>NoSQL</strong>은 다음과 같은 두 가지 주요 갈래가 있다.</p><ul><li><strong>문서 데이터베이스</strong><ul><li>데이터가 문서 자체에 포함돼 있으면서 하나의 문서와 다른 문서 간 관계가 거의 없는 사용 사례를 대상으로 함</li></ul></li><li><strong>그래프 데이터베이스</strong><ul><li>문서 데이터베이스와는 정 반대로 모든 것이 잠재적으로 관련이 있다는 사용 사례를 대상으로 함</li></ul></li></ul><p>세 가지 모델(문서, 관계형, 그래프) 모두 현재 널리 사용하고 있으며 각 모델은 <strong>각자의 영역에서 훌륭하다</strong>.</p><blockquote><p>한 모델을 다른 모델로 흉내 낼 수 있지만 그 결과는 대부분 엉망이며, 이것이 단일 만능 솔루션이 아닌 각기 목적에 맞는 다양한 시스템을 보유해야 하는 이유이다.</p></blockquote><p>문서 및 그래프 데이터베이스가 가진 공통점 중 하나는 일반적으로 저장할 데이터를 위한 스키마를 강제하지 않아 변화하는 요구사항에 맞춰 애플리케이션을 쉽게 변경할 수 있지만, 애플리케이션은 데이터가 특정 구조를 갖는다고 가정할 가능성이 높다.</p><ul><li>이는 스키마가 명시적인지(쓰기에 강요) 암시적인지(읽기에 다뤄짐)의 문제일 뿐이다.</li></ul><p>각 데이터 모델은 고유한 질의 언어나 프레임 워크를 제공한다.</p><ul><li>SQL, 맵리듀스, MongoDB의 집계 파이프라인, 사이퍼, 스파클, 데이터로그 등</li><li>CSS, XSL/XPath: 데이터베이스 질의 언어는 아니지만 흥미로운 유사점이 있다.</li></ul><p>아직 언급되지 않은 데이터 모델은 몇 가지는 아래와 같다.</p><ul><li>게놈(Genome) 데이터베이스</li><li>대형 강입자 충돌기를 위한 하드웨어 비용이 통제되는 사용자 정의 솔루션</li><li>전문 검색(full-text)</li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%91%EC%8B%AC-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%84%A4%EA%B3%84/>데이터 중심 어플리케이션 설계</a>
<a href=/tags/designing-data-intensive-application/>Designing Data-Intensive Application</a>
<a href=/tags/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4/>소프트웨어</a>
<a href=/tags/software/>Software</a>
<a href=/tags/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EA%B3%B5%ED%95%99/>소프트웨어 공학</a>
<a href=/tags/software-engineering/>Software Engineering</a>
<a href=/tags/%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/>아키텍처</a>
<a href=/tags/architecture/>Architecture</a>
<a href=/tags/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98/>소프트웨어 아키텍처</a>
<a href=/tags/software-architecture/>Software Architecture</a>
<a href=/tags/%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84/>시스템 설계</a>
<a href=/tags/system-design/>System Design</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://product.kyobobook.co.kr/detail/S000001766328 target=_blank rel=noopener><div class=article-details><h2 class=article-title>데이터 중심 애플리케이션 설계</h2><footer class=article-time>교보문고</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/designing-data-intensive-application/2/2/><div class=article-image><img src=/post/designing-data-intensive-application/2/2/cover.da37edb5ab5d5614db18429314b2003a_hu03451f961cb1218aaf8d95eea6944999_534781_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 2.2 데이터 모델과 질의 언어 - 데이터를 위한 질의 언어" data-key=designing-data-intensive-application/2/2 data-hash="md5-2jfttatdVhTbGEKTFLIAOg=="></div><div class=article-details><h2 class=article-title>2.2 데이터 모델과 질의 언어 - 데이터를 위한 질의 언어</h2></div></a></article><article class=has-image><a href=/post/designing-data-intensive-application/2/1/><div class=article-image><img src=/post/designing-data-intensive-application/2/1/cover.da37edb5ab5d5614db18429314b2003a_hu03451f961cb1218aaf8d95eea6944999_534781_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 2.1 데이터 모델과 질의 언어 - 관계형 모델과 문서 모델" data-key=designing-data-intensive-application/2/1 data-hash="md5-2jfttatdVhTbGEKTFLIAOg=="></div><div class=article-details><h2 class=article-title>2.1 데이터 모델과 질의 언어 - 관계형 모델과 문서 모델</h2></div></a></article><article class=has-image><a href=/post/designing-data-intensive-application/1/><div class=article-image><img src=/post/designing-data-intensive-application/1/cover.da37edb5ab5d5614db18429314b2003a_hu03451f961cb1218aaf8d95eea6944999_534781_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 1. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 어플리케이션" data-key=designing-data-intensive-application/1 data-hash="md5-2jfttatdVhTbGEKTFLIAOg=="></div><div class=article-details><h2 class=article-title>1. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 어플리케이션</h2></div></a></article><article class=has-image><a href=/post/clean-architecture/34/><div class=article-image><img src=/post/clean-architecture/34/cover.8c3d183c5f9cbadfe69a2bd0021a711c_hu01783d23203014d58ee585db2e3121c4_1011761_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 34. 빠져있는 장: By Simon Brown" data-key=clean-architecture/34 data-hash="md5-jD0YPF+cut/mmivQAhpxHA=="></div><div class=article-details><h2 class=article-title>34. 빠져있는 장: By Simon Brown</h2></div></a></article><article class=has-image><a href=/post/clean-architecture/33/><div class=article-image><img src=/post/clean-architecture/33/cover.8c3d183c5f9cbadfe69a2bd0021a711c_hu01783d23203014d58ee585db2e3121c4_1011761_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 33. 사례연구: 비디오 판매" data-key=clean-architecture/33 data-hash="md5-jD0YPF+cut/mmivQAhpxHA=="></div><div class=article-details><h2 class=article-title>33. 사례연구: 비디오 판매</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>