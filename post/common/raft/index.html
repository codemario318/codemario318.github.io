<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="쉽게 이해하는 Raft 합의 알고리즘"><title>Raft 합의 알고리즘</title><link rel=canonical href=https://codemario318.github.io/post/common/raft/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="Raft 합의 알고리즘"><meta property="og:description" content="쉽게 이해하는 Raft 합의 알고리즘"><meta property="og:url" content="https://codemario318.github.io/post/common/raft/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="CS"><meta property="article:tag" content="Computer Science"><meta property="article:tag" content="분산 시스템"><meta property="article:tag" content="Distributed System"><meta property="article:tag" content="Distributed Systems"><meta property="article:tag" content="Raft"><meta property="article:tag" content="합의"><meta property="article:tag" content="Consensus"><meta property="article:published_time" content="2025-07-27T16:38:00+09:00"><meta property="article:modified_time" content="2025-07-27T16:38:00+09:00"><meta property="og:image" content="https://codemario318.github.io/post/common/raft/cover.png"><meta name=twitter:title content="Raft 합의 알고리즘"><meta name=twitter:description content="쉽게 이해하는 Raft 합의 알고리즘"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/common/raft/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-K99591YLGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K99591YLGK",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3183752545292673" crossorigin=anonymous></script><meta name=naver-site-verification content="2315bde85c86f66092140cc465c340a2170f3187"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/boostcamp/><span>부스트캠프</span>
<span class=content-count>11</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>80</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>2</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>22</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/nest/><span>Nest</span>
<span class=content-count>2</span></a></li><li><a href=/categories/network/><span>네트워크</span>
<span class=content-count>1</span></a></li><li><a href=/categories/node/><span>Node</span>
<span class=content-count>6</span></a></li><li><a href=/categories/others/><span>Others</span>
<span class=content-count>4</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>5</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#raft란>Raft란?</a></li><li><a href=#raft의-구조-리더-중심>Raft의 구조: 리더 중심</a><ol><li><a href=#리더-선출>리더 선출</a></li><li><a href=#로그-복제-log-replication>로그 복제 Log Replication</a></li><li><a href=#안정성-보장>안정성 보장</a></li><li><a href=#시나리오-예시-클라이언트-요청-처리>시나리오 예시: 클라이언트 요청 처리</a></li></ol></li><li><a href=#raft-사용-시-주의할-점>Raft 사용 시 주의할 점</a><ol><li><a href=#과반수-장애-시-시스템-정지>과반수 장애 시 시스템 정지</a></li><li><a href=#네트워크-분할partition-상황-대응>네트워크 분할(Partition) 상황 대응</a></li><li><a href=#로그-무한-증가와-스냅샷>로그 무한 증가와 스냅샷</a></li><li><a href=#리더-선거-충돌>리더 선거 충돌</a></li><li><a href=#느린-팔로워로-인한-성능-저하>느린 팔로워로 인한 성능 저하</a></li><li><a href=#클라이언트-요청-중복-처리>클라이언트 요청 중복 처리</a></li><li><a href=#읽기-일관성-주의>읽기 일관성 주의</a></li></ol></li><li><a href=#raft-vs-정족수-합의-어떤-합의-방식이-더-적합할까>Raft vs 정족수 합의: 어떤 합의 방식이 더 적합할까?</a><ol><li><a href=#기본-개념의-차이>기본 개념의 차이</a></li><li><a href=#처리-흐름-비교>처리 흐름 비교</a></li><li><a href=#선택-기준-요약>선택 기준 요약</a></li><li><a href=#마무리>마무리</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/common/raft/><img src=/post/common/raft/cover_hu554f9da6d5f60d262b7bd9092b4874da_1645365_800x0_resize_box_3.png srcset="/post/common/raft/cover_hu554f9da6d5f60d262b7bd9092b4874da_1645365_800x0_resize_box_3.png 800w, /post/common/raft/cover_hu554f9da6d5f60d262b7bd9092b4874da_1645365_1600x0_resize_box_3.png 1600w" width=800 height=800 loading=lazy alt="Featured image of post Raft 합의 알고리즘"></a></div><div class=article-details><header class=article-category><a href=/categories/common/ style=background-color:#2a9d8f;color:#fff>Common</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/common/raft/>Raft 합의 알고리즘</a></h2><h3 class=article-subtitle>쉽게 이해하는 Raft 합의 알고리즘</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2025/07/27</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>오늘은 저번에 작성한 <a class=link href=/common/quorum-based-consensus>정족수 합의</a>에 이어서 <strong>Raft 합의 알고리즘</strong>을 살펴보려고 합니다.</p><p>저번 글에도 설명했지만, 분산 시스템에서 가장 어려운 문제 중 하나는 <strong>모든 노드가 하나의 동일한 결정을 내리는 것, 즉 <em>합의(Consensus)</em></strong> 입니다.</p><p>이런 상황에서도 시스템이 정상적으로 동작하려면 신뢰할 수 있는 합의 메커니즘이 필요하며, 그 중 하나가 Raft입니다.</p><h2 id=raft란>Raft란?</h2><blockquote><p>Raft는 Paxos와 동일한 목표를 가지면서도 <strong>이해하기 쉽도록 설계된 합의 알고리즘</strong></p></blockquote><p>2014년 Diego Ongaro와 John Ousterhout가 발표한 논문 “In Search of an Understandable Consensus Algorithm” 에서는 Paxos의 복잡성을 극복할 수 있는 대안으로 Raft를 제시했습니다.</p><p>Raft는 다음의 세 가지 주요 목표를 가지고 있습니다.</p><ul><li>이해하기 쉬울 것</li><li>정상적인 상태 유지뿐 아니라 복구 절차도 직관적일 것</li><li>실제 구현에 적합할 것</li></ul><p><del>Paxos는 다음 글에 작성해보겠습니다.</del></p><h2 id=raft의-구조-리더-중심>Raft의 구조: 리더 중심</h2><p>Raft는 노드 간의 역할을 명학히 나눕니다.</p><ul><li><strong>Leader(1개)</strong>: 모든 클라이언트 요청을 받고, 로그를 다른 노드에 전파</li><li><strong>Follower(N개)</strong>: 리더의 명령을 따름</li><li><strong>Candidate</strong>: 리더 선출을 위해 임시로 전환되는 상태</li></ul><p>모든 노드는 기본적으로 팔로워로 싲가하며, 주기적으로 리더로부터 heartbeat를 받지 못하면 후보 상태가 되어 선거를 시작합니다.</p><h3 id=리더-선출>리더 선출</h3><p>리더는 항상 하나만 존재해야합니다. 이를 위해 임기(term) 개념이 도입하고 있습니다.</p><ul><li>일정 시간 동안 리더의 heartbeat를 받지 못하면, follower는 선거를 시작</li><li>본인을 리더로 추천하고 다른 노드의 투표를 요청</li><li><strong>과반수의 투표</strong>를 얻은 후보는 리더로 선출</li></ul><p>이 과정을 토해 네트워크 지연이나 장애 상황에서도 안정적으로 새로운 리더를 선출할 수 있게 해줍니다.</p><h3 id=로그-복제-log-replication>로그 복제 Log Replication</h3><p>리더가 되면 클라이언트 요청을 받아 로그 항목으로 저장하고, 팔로워들에게 <strong>AppendEntries RPC</strong>를 보냅니다.</p><p>복제는 다음과 같은 방식으로 수행됩니다.</p><ol><li>리더는 새로운 로그 항목을 자신의 로그에 추가</li><li>팔로워들에게 <strong>AppendEntries</strong> 메시지 전송</li><li>팔로워가 수신 성공 시 응답</li><li><strong>과반수 이상</strong>의 팔로워가 응답하면 커밋(Commit) 처리</li><li>리더가 커밋을 팔로워들에게 전파</li></ol><p>로그 복제가 실패할 경우에는 이전 로그 상태로 되돌아가며 재동기화하여 결과적 일관성(eventually consistent)를 보장합니다.</p><h3 id=안정성-보장>안정성 보장</h3><p>Raft는 다음과 같은 메커니즘으로 안전성을 보장합니다.</p><ul><li><strong>Log Matching Property</strong><ul><li>동일한 인덱스와 term의 로그 항목은 동일해야함</li></ul></li><li><strong>Leader Completeness Property</strong><ul><li>커밋된 로그는 다음 term의 리더 로그에 반드시 포함됨</li></ul></li><li>팔로워는 오직 리더의 로그에 맞춰 자신을 수정함</li></ul><p>이러한 동작으로 시스템은 리더가 바뀌어도 로그가 일관되게 유지될 수 있습니다.</p><h3 id=시나리오-예시-클라이언트-요청-처리>시나리오 예시: 클라이언트 요청 처리</h3><pre class=mermaid style=text-align:center>sequenceDiagram
    participant Client
    participant Leader
    participant Follower1
    participant Follower2

    Client->>Leader: Append(command)
    Leader->>Follower1: AppendEntries
    Leader->>Follower2: AppendEntries
    Follower1-->>Leader: Success
    Follower2-->>Leader: Success
    Leader->>All: Commit
    Leader-->>Client: Success
</pre><h2 id=raft-사용-시-주의할-점>Raft 사용 시 주의할 점</h2><p>Raft는 이해하기 쉬운 구조 덕분에 많이 사용되지만, <strong>실제 서비스에 적용할 때는 주의해야 할 점</strong>이 분명 존재합니다. 특히 고가용성과 성능, 데이터 일관성 측면에서 다양한 고려가 필요합니다.</p><h3 id=과반수-장애-시-시스템-정지>과반수 장애 시 시스템 정지</h3><p>Raft는 <strong>과반수 노드의 응답</strong>이 있어야 리더를 선출하거나 로그를 커밋할 수 있습니다. 따라서 과반수 이상이 장애나 네트워크 격리로 인해 응답하지 못하면, <strong>쓰기 작업이 모두 중단</strong>됩니다.</p><pre class=mermaid style=text-align:center>graph TD
    A[5개 노드 구성] --> B{3개 이상 응답 가능?}
    B -- Yes --> C[정상적으로 리더 선출 및 커밋 가능]
    B -- No --> D[쓰기 불가, 시스템 정지]
</pre><blockquote><p>최소 3개, 가능하면 5개 등 <strong>홀수 구성</strong>을 유지하고, 과반수가 살아있도록 클러스터를 배치해야 합니다.</p></blockquote><h3 id=네트워크-분할partition-상황-대응>네트워크 분할(Partition) 상황 대응</h3><p>리더가 일부 팔로워들과만 연결된 상태에서 나머지 노드와 <strong>분리(network partition)</strong> 될 경우,
기존 리더는 자신이 리더인 줄 알고 요청을 받을 수 있지만, 로그 커밋은 실패합니다.</p><pre class=mermaid style=text-align:center>sequenceDiagram
    participant Leader (격리됨)
    participant Client
    participant Follower1
    participant Follower2 (다수)

    Client->>Leader (격리됨): 요청
    Leader (격리됨)->>Follower1: AppendEntries
    Note over Follower1: quorum 부족
    Leader (격리됨)-->>Client: 실패 또는 타임아웃
</pre><blockquote><p>클라이언트 타임아웃을 짧게 잡고, 요청을 다른 노드로 재시도하게 하는 전략이 필요합니다.</p></blockquote><h3 id=로그-무한-증가와-스냅샷>로그 무한 증가와 스냅샷</h3><p>Raft는 로그를 계속 누적하며 동작합니다. 아무 처리 없이 장시간 운영하면 <strong>디스크 용량이 부족</strong>해질 수 있습니다.</p><pre class=mermaid style=text-align:center>flowchart TD
    A[로그 누적]
    A --> B[용량 증가]
    B --> C[디스크 부족]
    C --> D[성능 저하 또는 장애]

    A --> E[주기적 스냅샷 생성]
    E --> F[이전 로그 압축/삭제]
    F --> G[안정적인 운영]
</pre><blockquote><p>주기적으로 스냅샷을 생성하고, 오래된 로그를 안전하게 삭제하는 정책이 필요할 수 있습니다.</p></blockquote><h3 id=리더-선거-충돌>리더 선거 충돌</h3><p>여러 노드가 <strong>동시에 candidate가 되면</strong>, 과반수 득표에 실패하고 리더가 선출되지 않을 수 있습니다 (split vote).</p><blockquote><p><code>election timeout</code>을 노드마다 <strong>랜덤하게 설정</strong>하여 충돌 가능성을 줄일 수 있습니다.</p></blockquote><h3 id=느린-팔로워로-인한-성능-저하>느린 팔로워로 인한 성능 저하</h3><p>느린 follower 노드가 로그 복제 타이밍을 따라가지 못하면, 리더의 커밋 속도도 느려질 수 있습니다.</p><blockquote><p>비동기 전파로 느린 노드를 따로 관리하거나, 너무 뒤처진 follower는 로그 스냅샷으로 초기화가 도움이 될 수 있습니다.</p></blockquote><h3 id=클라이언트-요청-중복-처리>클라이언트 요청 중복 처리</h3><p>리더 전환 중, 동일한 클라이언트 요청이 중복될 수 있습니다. 이 때 <strong>같은 명령이 여러 번 실행</strong>될 수 있습니다.</p><blockquote><p>클라이언트 요청마다 고유 ID를 부여하고(멱등성), <strong>중복 요청은 캐싱</strong> 또는 <strong>deduplication 로직</strong>으로 방지해야 합니다.</p></blockquote><h3 id=읽기-일관성-주의>읽기 일관성 주의</h3><p>Raft 팔로워는 오래된 데이터를 가지고 있을 수 있기 때문에, <strong>정확한 읽기(read-your-write)</strong> 를 보장하려면 리더에게 요청해야 합니다.</p><blockquote><p>Raft에서는 <code>ReadIndex</code>, <code>LeaseRead</code> 같은 기법을 사용해 <strong>선거 없는 일관된 읽기</strong>를 구현할 수 있습니다.</p></blockquote><h2 id=raft-vs-정족수-합의-어떤-합의-방식이-더-적합할까>Raft vs 정족수 합의: 어떤 합의 방식이 더 적합할까?</h2><p>분산 시스템에서 합의는 필수적인 요소입니다. 이전에 학습했던 정족수 합의와는 어떤 차이점이 있을까요?</p><ul><li><strong>정족수 기반 합의 (Quorum-based Consensus)</strong></li><li><strong>Raft 합의 알고리즘 (Log Replication with Leader Election)</strong></li></ul><p>두 방식은 목적과 구현 방식이 다릅니다. 아래에서 차이점을 비교해보겠습니다.</p><h3 id=기본-개념의-차이>기본 개념의 차이</h3><div class=table-wrapper><table><thead><tr><th>항목</th><th>정족수 합의</th><th>Raft</th></tr></thead><tbody><tr><td>합의 방식</td><td>클라이언트가 직접 다수 노드로 읽기/쓰기 요청 후, 정족수 응답을 수집하여 결정</td><td>리더가 모든 요청을 처리하고, 로그 복제를 통해 과반수에 커밋</td></tr><tr><td>구조</td><td>리더 없음 (모든 노드가 대등)</td><td>리더 중심 구조</td></tr><tr><td>일관성 보장</td><td><code>W + R > N</code>일 때 eventual consistency 보장</td><td>리더 커밋 이후 응답 → strong consistency 보장</td></tr><tr><td>장애 허용성</td><td>R 또는 W만 만족하면 일관성 일부 손해를 감수하고 처리 가능</td><td>과반수 미만 장애 시 리더 선출 불가 → 쓰기 중단</td></tr><tr><td>성능 유연성</td><td>클라이언트가 <code>R</code>, <code>W</code> 조정 가능</td><td>구조적 한계로 조정 불가, but 일관성 명확</td></tr></tbody></table></div><h3 id=처리-흐름-비교>처리 흐름 비교</h3><p><strong>정족수 합의 (예: DynamoDB)</strong></p><pre class=mermaid style=text-align:center>sequenceDiagram
  participant Client
  participant A
  participant B
  participant C

  Client->>A: Write(X)
  Client->>B: Write(X)
  Client->>C: Write(X)
  A-->>Client: OK
  B-->>Client: OK
  Note right of Client: W = 2 → Write Success

  Client->>A: Read()
  Client->>B: Read()
  A-->>Client: X
  B-->>Client: X
  Note right of Client: R = 2 → Read Success
</pre><hr><p><strong>Raft 합의</strong></p><pre class=mermaid style=text-align:center>sequenceDiagram
  participant Client
  participant Leader
  participant Follower1
  participant Follower2

  Client->>Leader: Write(X)
  Leader->>Follower1: AppendEntries(X)
  Leader->>Follower2: AppendEntries(X)
  Follower1-->>Leader: OK
  Follower2-->>Leader: OK
  Leader->>All: Commit(X)
  Leader-->>Client: Success
</pre><h3 id=선택-기준-요약>선택 기준 요약</h3><div class=table-wrapper><table><thead><tr><th>상황</th><th>적합한 방식</th></tr></thead><tbody><tr><td>일관성이 가장 중요 (예: 금융, 설정 저장소)</td><td><strong>Raft</strong></td></tr><tr><td>빠른 응답과 가용성 중시 (예: 추천 캐시, 로그 수집기)</td><td><strong>정족수 합의</strong></td></tr><tr><td>클라이언트가 유연한 조정 가능해야 하는 경우</td><td><strong>정족수 합의</strong></td></tr><tr><td>복잡한 충돌 해결 없이 안정된 흐름이 필요한 경우</td><td><strong>Raft</strong></td></tr></tbody></table></div><h3 id=마무리>마무리</h3><p>기존 Paxos의 복잡함을 단순함으로 대체한 합의 알고리즘이 바로 Raft는 분산 시스템 입니다.</p><p>정족수 합의와 Raft는 서로 다른 철학과 목적을 가진 합의 방식입니다.</p><p>어떤 방법이 더 좋다고 단정하기보다는, 서비스의 특성과 우선순위에 따라 적합한 방식을 선택하는 것이 중요합니다. 일관성이 핵심이라면 Raft, 가용성과 유연성이 필요하다면 정족수 합의가 더 적합할 수 있습니다.</p></section><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
</script><footer class=article-footer><section class=article-tags><a href=/tags/cs/>CS</a>
<a href=/tags/computer-science/>Computer Science</a>
<a href=/tags/%EB%B6%84%EC%82%B0-%EC%8B%9C%EC%8A%A4%ED%85%9C/>분산 시스템</a>
<a href=/tags/distributed-system/>Distributed System</a>
<a href=/tags/distributed-systems/>Distributed Systems</a>
<a href=/tags/raft/>Raft</a>
<a href=/tags/%ED%95%A9%EC%9D%98/>합의</a>
<a href=/tags/consensus/>Consensus</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://raft.github.io/ target=_blank rel=noopener><div class=article-details><h2 class=article-title>The Raft Consensus Algorithm</h2><footer class=article-time>https://raft.github.io/</footer></div></a></article><article><a href=https://raft.github.io/raft.pdf target=_blank rel=noopener><div class=article-details><h2 class=article-title>논문: In Search of an Understandable Consensus Algorithm</h2><footer class=article-time>https://raft.github.io/raft.pdf</footer></div></a></article><article><a href=https://thesecretlivesofdata.com/raft/ target=_blank rel=noopener><div class=article-details><h2 class=article-title>Raft visualization tool</h2><footer class=article-time>https://thesecretlivesofdata.com/raft/</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/common/quorum-based-consensus/><div class=article-image><img src=/post/common/quorum-based-consensus/cover.8bb1aba30d7012de487fef8598398170_hu554f9da6d5f60d262b7bd9092b4874da_1645365_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 정족수 합의" data-key=common/quorum-based-consensus data-hash="md5-i7Grow1wEt5If++FmDmBcA=="></div><div class=article-details><h2 class=article-title>정족수 합의</h2></div></a></article><article class=has-image><a href=/post/common/cap/><div class=article-image><img src=/post/common/cap/cover.7b6d2edc559a788588dd7c2cfd5f9ac4_hubb3ae2fb969f4b37ae3985693b82d6bc_79725_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 논문으로 다시 이해한 CAP 정리" data-key=common/cap data-hash="md5-e20u3FWaeIWI3Xws/V+axA=="></div><div class=article-details><h2 class=article-title>논문으로 다시 이해한 CAP 정리</h2></div></a></article><article class=has-image><a href=/post/websocket-scale-out/><div class=article-image><img src=/post/websocket-scale-out/cover.fad2ec1ed7696f2930721d83141e07b7_hu9514b00f9971266d18374bc0654f0c59_139764_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 웹소켓 시스템의 성능 개선하기" data-key=websocket-scale-out data-hash="md5-+tLsHtdpbykwch2DFB4Htw=="></div><div class=article-details><h2 class=article-title>웹소켓 시스템의 성능 개선하기</h2></div></a></article><article class=has-image><a href=/post/common/architect-orm/><div class=article-image><img src=/post/common/architect-orm/cover.a341852aa054d09154774471ad63c45c_hu4df64d5e24bcaccc3d64e54ad938fd06_127791_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 아키텍처 관점에서 ORM을 사용하는 이유" data-key=common/architect-orm data-hash="md5-o0GFKqBU0JFUd0RxrWPEXA=="></div><div class=article-details><h2 class=article-title>아키텍처 관점에서 ORM을 사용하는 이유</h2></div></a></article><article class=has-image><a href=/post/redis-decision/><div class=article-image><img src=/post/redis-decision/cover.3d3569cb310ae91306f4058acf44269f_hu7f70aa9d6c4c089116378e049ecd65ff_293445_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Redis 사용 여부 결정하기: 지금은 단순하게, 나중엔 안전하게" data-key=redis-decision data-hash="md5-PTVpyzEK6RMG9AWKz0Qmnw=="></div><div class=article-details><h2 class=article-title>Redis 사용 여부 결정하기: 지금은 단순하게, 나중엔 안전하게</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>