<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="연구용 데이터셋으로 프로젝트 만들기"><title>[MovieLens] 1. 데이터 살펴보기</title><link rel=canonical href=https://codemario318.github.io/post/movielens/1/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="[MovieLens] 1. 데이터 살펴보기"><meta property="og:description" content="연구용 데이터셋으로 프로젝트 만들기"><meta property="og:url" content="https://codemario318.github.io/post/movielens/1/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="토이프로젝트"><meta property="article:tag" content="ToyProject"><meta property="article:tag" content="분석"><meta property="article:tag" content="Requirements analysis"><meta property="article:tag" content="데이터셋"><meta property="article:tag" content="dataset"><meta property="article:tag" content="GroupLens"><meta property="article:tag" content="MovieLens"><meta property="article:tag" content="Python"><meta property="article:tag" content="Pandas"><meta property="article:published_time" content="2024-03-18T11:00:01+09:00"><meta property="article:modified_time" content="2024-03-18T11:00:01+09:00"><meta property="og:image" content="https://codemario318.github.io/post/movielens/1/cover.jpeg"><meta name=twitter:title content="[MovieLens] 1. 데이터 살펴보기"><meta name=twitter:description content="연구용 데이터셋으로 프로젝트 만들기"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/movielens/1/cover.jpeg"><script async src="https://www.googletagmanager.com/gtag/js?id=G-K99591YLGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K99591YLGK",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3183752545292673" crossorigin=anonymous></script><meta name=naver-site-verification content="2315bde85c86f66092140cc465c340a2170f3187"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/boostcamp/><span>부스트캠프</span>
<span class=content-count>11</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>76</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>2</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>22</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/nest/><span>Nest</span>
<span class=content-count>1</span></a></li><li><a href=/categories/network/><span>네트워크</span>
<span class=content-count>1</span></a></li><li><a href=/categories/node/><span>Node</span>
<span class=content-count>6</span></a></li><li><a href=/categories/others/><span>Others</span>
<span class=content-count>4</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>5</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#데이터셋-구성>데이터셋 구성</a></li><li><a href=#movies>movies</a></li><li><a href=#tags>tags</a></li><li><a href=#ratings>ratings</a></li><li><a href=#끝으로>끝으로</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/movielens/1/><img src=/post/movielens/1/cover_hu223669cbbbe5efa1c70286790dba8a54_16582_800x0_resize_q75_box.jpeg srcset="/post/movielens/1/cover_hu223669cbbbe5efa1c70286790dba8a54_16582_800x0_resize_q75_box.jpeg 800w, /post/movielens/1/cover_hu223669cbbbe5efa1c70286790dba8a54_16582_1600x0_resize_q75_box.jpeg 1600w" width=800 height=296 loading=lazy alt="Featured image of post [MovieLens] 1. 데이터 살펴보기"></a></div><div class=article-details><header class=article-category><a href=/categories/project/>Project</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/movielens/1/>[MovieLens] 1. 데이터 살펴보기</a></h2><h3 class=article-subtitle>연구용 데이터셋으로 프로젝트 만들기</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2024/03/18</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>안녕하세요 :D 서칭하던 중 재미있어보이는 데이터를 발견했습니다.</p><p>미네소타 대학의 컴퓨터 과학 연구 그룹인 <a class=link href=https://grouplens.org/ target=_blank rel=noopener><strong>GroupLens</strong></a>에서 공개한 <a class=link href=https://grouplens.org/datasets/movielens/latest/ target=_blank rel=noopener><strong>MovieLens</strong></a> 데이터셋으로, GroupLens의 연구 분야 중 하나인 인공지능 추천 시스템을 위해 만들어진 데이터셋입니다.</p><p><strong>86,537편의 영화</strong>와 그와 관련된 <strong>33,832,162개의 평점</strong> 및 <strong>2,328,315개의 태그</strong>로 구성되어있는데, 볼륨이 꽤 커서 직접 활용해보지 못했던 기술들을 실전에 유사한 환경에서 만들어 볼 수 있을것 같다는 생각이 들었습니다.</p><p>프로젝트는 처음 <code>RDBMS</code> 부터 시작하여, 일부 데이터들을 다른 기술들로 전환하여 점진적으로 개선하는 방식으로 진행해보려고 합니다.</p><p>오늘은 첫 걸음으로 데이터가 어떤 형식으로 구성되어있는지 간략하게 살펴보고, 어떤 형태로 설계할지 고민해보겠습니다.</p><p><code>Python3</code>와 <code>Pandas</code>를 활용하여 간단히 확인를 했는데, 환경 구성과 같은 내용들은 <a class=link href=https://github.com/codemario318/movielens-data/tree/main target=_blank rel=noopener><strong>Movielens 데이터셋 구조 확인</strong></a> 레포지토리를 참고해주시면 되겠습니다.</p><p>데이터셋에 대한 정보는 <a class=link href=https://files.grouplens.org/datasets/movielens/ml-latest-README.html target=_blank rel=noopener><strong>README.html</strong></a>에 상세히 나와있습니다.</p><h2 id=데이터셋-구성>데이터셋 구성</h2><p>데이터셋은 <code>userId</code>, <code>movieId</code>를 공통으로 활용하고 있고, 앞서 설명드렸던 영화, 평점, 태그 포함 총 6개의 <code>.csv</code> 파일로 구성되어 있습니다.</p><p><strong><code>userId</code></strong></p><ul><li><a class=link href=https://movielens.org/ target=_blank rel=noopener>MovieLens</a>의 사용자로 무작위 선택</li></ul><p><strong><code>movieId</code></strong></p><ul><li><a class=link href=https://movielens.org/ target=_blank rel=noopener>MovieLens</a>에 등록된 영화로, 등급이나 태그가 하나 이상 등록된 영화</li></ul><p>포함된 데이터 중 영화에 대한 태그 관련성 점수를 포함하는 데이터 셋인 <strong>태그 게놈</strong>(<code>genome-scores.csv</code>, <code>genome-tags.csv</code>)와 영화 데이터의 다른 소스에 연결하기 위한 식별자 정보가 담겨있는 <code>links.csv</code> 데이터는 활용하지 않겠습니다.</p><h2 id=movies>movies</h2><p>영화 데이터는 <code>movieId</code>, <code>title</code>, <code>genres</code> 로 구성되어 있습니다.</p><p>영화의 제목들은 직접 입력되었거나, <a class=link href=https://www.themoviedb.org/ target=_blank rel=noopener>https://www.themoviedb.org/</a>에서 가져온 데이터로, 괄호 안에 개봉년이 포함되어 있으나 정확하지 않을 수 있다고 합니다.</p><p>영화 장르들을 모두 포함하고있는 <code>genres</code> 컬럼은 아래의 19개 장르중 일부를 <code>|</code> 문자로 합친 형태로 구성된다고 합니다.</p><ul><li>Action</li><li>Adventure</li><li>Animation</li><li>Children&rsquo;s</li><li>Comedy</li><li>Crime</li><li>Documentary</li><li>Drama</li><li>Fantasy</li><li>Film-Noir</li><li>Horror</li><li>Musical</li><li>Mystery</li><li>Romance</li><li>Sci-Fi</li><li>Thriller</li><li>War</li><li>Western</li><li>(no genres listed)</li></ul><p>장르가 없는 경우는 (<strong>no genres listed</strong>)가 입력되는 것으로 보아 <code>NULL</code>을 허용하지는 않는 것으로 보이네요.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;dataset/movies.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>)</span> <span class=c1># 86537</span>
</span></span></code></pre></td></tr></table></div></div><p>파일을 <code>pandas DataFrame</code>으로 열고 건수를 확인해보니, 처음 언급한대로 86,537건이었습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>최상단 5건을 확인해보니, <strong>README.html</strong>에 언급된 형식으로 데이터들이 저장되어 있는 것으로 보입니다.</p><div class=table-wrapper><table><thead><tr><th>movieId</th><th>title</th><th>genres</th></tr></thead><tbody><tr><td>1</td><td>Toy Stroy (1995)</td><td>Adventure|Animation|Children|Comedy|Fantasy</td></tr><tr><td>2</td><td>Jumanji (1995)</td><td>Adventure|Children|Fantasy</td></tr><tr><td>3</td><td>Grumpier Old Men (1995)</td><td>Comedy|Romance</td></tr><tr><td>4</td><td>Waiting to Exhale (1995)</td><td>Comedy|Drama|Romance</td></tr><tr><td>5</td><td>Father of the Bride Part II (1995)</td><td>Comedy</td></tr></tbody></table></div><p><code>genres</code> 컬럼 같은 경우 공식 설명과는 달리 총 20개로 <code>IMAX</code>가 추가되있습니다. 누락되었나보네요.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>genres_list</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;genres&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;|&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>genres</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>l</span> <span class=ow>in</span> <span class=n>genres_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>genres</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>l</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>genres</span><span class=p>))</span> <span class=c1># 20</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>genres</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>{
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Adventure&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;War&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;(no genres listed)&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Action&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Mystery&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Fantasy&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Film-Noir&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Comedy&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Romance&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;IMAX&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Crime&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Musical&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Animation&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Drama&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Horror&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Children&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Sci-Fi&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Thriller&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Western&#39;, 
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;Documentary&#39;
</span></span></span><span class=line><span class=cl><span class=s1>}
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;genres&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>str</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=s1>&#39;IMAX&#39;</span><span class=p>)])</span> <span class=c1># 195</span>
</span></span></code></pre></td></tr></table></div></div><p><code>IMAX</code>가 포함된 장르를 가지는 레코드들은 총 195건으로 많지는 않지만 데이터 분포 같은 것들이 중요한 요소는 아니기때문에 그냥 활용해도 괜찮을 것 같습니다.</p><hr><p>눈에 띄는점은 <code>genres</code> 컬럼인데, 각 장르가 <code>|</code> 문자로 구분되어 여러개 항목이 들어있습니다. 장르들이 영어 오름차순으로 정렬되어 저장되어있는 것으로 보이네요.</p><p>이러한 경우 일반적인 RDBMS에서 <code>genres</code>를 조건으로 이용하여 <code>SELECT</code>하게 될 경우 <code>%{keyword}%</code>로 처리해야하므로 인덱스를 활용할 수 없고, 이로 인해 성능에서 문제가 발생할 수 있습니다.</p><p><code>genres</code> 컬럼들의 각 장르들을 카테고리 테이블로 분리하고 <code>movieId</code>와 장르 간 1:N 테이블을 추가하는 방식으로 바꾼다면 장르를 이용한 검색 조건으로 인덱스를 사용할 수 없는 문제는 해결할 수 있습니다만&mldr;</p><p><code>genres</code>가 여러개의 장르를 포함할 수 있다는 특성으로 인해 쿼리 작성할 때 조인을 사용하면 <code>movies</code>의 컬럼들이 중복됩니다.</p><p>이로 인해 서브 쿼리나 <code>CONCAT</code>과 같은 처리를 필요로 하거나, <code>movieId</code>로 장르를 조회하는 방식으로 처리해야 하므로 조회 성능이 떨어질 수 있음은 물론, 테이블 구조가 불필요하게 복잡해집니다.</p><p><code>genres</code>의 데이터 형태와 한번 등록되면 변하지 않는 장르의 특성으로 볼 때, 단순 조회를 위한 컬럼이지 않을까 추측되고, 검색 기능은 <strong>검색 엔진</strong>을 별도로 구성하는 방식으로 처리되고 있을 것 같다는 예상을 해봅니다.</p><p>일단 RDBMS를 이용한 <code>genres</code> 컬럼 조건 검색은 배제하고 이후 더 좋은 방법을 고려하는 것이 좋겠습니다.</p><h2 id=tags>tags</h2><p>태그 데이터는 <code>userId</code>, <code>movieId</code>, <code>tag</code>, <code>timestamp</code>로 구성되어 있습니다.</p><p>각 행은 한명의 사용자가 한 영화에 적용한 하나의 태그를 의미합니다.</p><p><code>tag</code>는 단일 단어나 짧은 문구로 구성되며, 의미, 가치, 목적은 각 사용자의 목적에 의해 결정됩니다.</p><p>데이터는 총 2,328,315건으로 확인됩니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;dataset/tags.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=table-wrapper><table><thead><tr><th>userId</th><th>movieId</th><th>tag</th><th>timestamp</th></tr></thead><tbody><tr><td>10</td><td>260</td><td>good vs evil</td><td>1430666558</td></tr><tr><td>10</td><td>260</td><td>Harrison Ford</td><td>1430666505</td></tr><tr><td>10</td><td>260</td><td>sci-fi</td><td>1430666538</td></tr><tr><td>14</td><td>1221</td><td>Al Pacino</td><td>1311600756</td></tr><tr><td>14</td><td>1221</td><td>mafia</td><td>1311600746</td></tr></tbody></table></div><p><code>tags.csv</code> 파일을 읽어 최상단 5건을 확인해보면 1명의 사용자가 여러개의 영화에 여러개의 태그를 남길 수 있다는 것을 예상해볼 수 있습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>unique_tags</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&#34;tag&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>drop_duplicates</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>len</span><span class=p>(</span><span class=n>unique_tags</span><span class=p>)</span> <span class=c1># 153950</span>
</span></span></code></pre></td></tr></table></div></div><p>유니크한 <code>tag</code> 값은 153,950건 입니다.</p><hr><p><code>tags.csv</code>는 사용자가 한 영화에 적용한 태그로 1명의 유저가 여러 영화에 여러 종류의 태그를 적용할 수 있습니다.</p><p>전체 항목은 2,328,315건 이지만, <code>tag</code> 컬럼의 유니크한 값의 개수는 153,950개 인 것을 확인할 수 있습니다.</p><p>이러한 특성을 지닌 <code>tag.csv</code>의 데이터를 RDBMS에 저장하는 것이 좋은 방법인가 의구심이 들긴 하지만, 일반적인 서비스 정책으로 예상해 볼 때(특정 영화에 적용된 태그들 조회, 사용자가 활용한 태그들 조회, 사용자가 특정 영화에 남긴 태그 조회 등) 인덱스 설정만 잘 해준다면 화면에 노출 될 데이터 조회 성능에는 큰 이슈는 없어 보입니다.</p><p>처음엔 RDBMS로 처리하더라도 이후 새로운 요구가 있다면, 다른 방법으로 변경을 고려할 수 있겠습니다.</p><h2 id=ratings>ratings</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;dataset/ratings.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>df</span><span class=o>.</span><span class=n>head</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=table-wrapper><table><thead><tr><th>userId</th><th>movieId</th><th>rating</th><th>timestamp</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>4.0</td><td>1225734739</td></tr><tr><td>1</td><td>110</td><td>4.0</td><td>1225865086</td></tr><tr><td>1</td><td>158</td><td>4.0</td><td>1225733503</td></tr><tr><td>1</td><td>260</td><td>4.5</td><td>1225735204</td></tr><tr><td>1</td><td>356</td><td>5.0</td><td>1225735119</td></tr></tbody></table></div><p>평가 데이터는 <code>userId</code>, <code>movieId</code>, <code>rating</code>, <code>timestamp</code>로 구성되어 있습니다.</p><p>각 행은 한 사용자가 한 영화에 남긴 점수를 의미합니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>))</span> <span class=c1># 33832162</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&#34;rating&#34;</span><span class=p>]),</span> <span class=nb>max</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&#34;rating&#34;</span><span class=p>]))</span> <span class=c1># 0.5 5.0</span>
</span></span></code></pre></td></tr></table></div></div><p>총 데이터 수는 33,832,162건, 최대, 최소값은 각각 0.5, 5.0 입니다.</p><hr><p><code>ratings.csv</code>는 영화에 대한 사용자의 평점으로 영화 하나에 하나만 만들 수 있습니다.</p><p>영화 목록을 검색할 때 일반적으로 평균 평점이 포함되는데, 현재 상태로 테이블을 생성할 시 조회 처리에서 <code>GROUP BY</code>나 서브 쿼리를 통해 평균을 계산한다던가, 활용된 값들을 조회하는 처리가 필요하게 되고, 이 때문에 조회 성능에 문제가 발생할 수 있습니다.</p><p>이를 방지 위해 <code>movies</code> 테이블에 통계 정보에 활용될 컬럼을 만들어 두는 방식으로 설계하는 것도 고려해볼 수 있겠습니다.</p><p><code>rating</code> 컬럼도 꼭 소수로 넣을 필요는 없어보이네요.</p><h2 id=끝으로>끝으로</h2><p>간단하게 MovieLens 데이터셋의 주요 데이터들을 확인해봤습니다.</p><p>영화들에 대한 메타데이터가 없어 다채로운 기능들은 구현할 수 없을 것 같다는 점이 조금 아쉬운 마음에 찾아보니 MovieLens 데이터를 기반으로 <a class=link href=https://www.themoviedb.org/settings/api/request target=_blank rel=noopener>TBMS API</a>이용하여 만든 <a class=link href="https://www.kaggle.com/datasets/rounakbanik/the-movies-dataset?resource=download&amp;select=credits.csv" target=_blank rel=noopener><strong>The Movies Dataset</strong></a> 데이터가 Kaggle에 공개되어 있었습니다.</p><p>하지만 데이터가 최신화가 안되어 사용할 수 없는 데이터가 많아 사용은 보류했습니다.</p><p>일단 생각하고 있는 기능들은 MovieLens 데이터으로 충분해서 필요는 없지만, 여유가 된다면 제가 최신화를 해봐도 괜찮을 것 같네요.</p><p>다음은 각 데이터의 특성을 고려하여 테이블을 설계하고, DB에 적재해볼예정입니다.</p><p>부족한 글 끝까지 읽어주셔서 감사합니다 :D</p></section><footer class=article-footer><section class=article-tags><a href=/tags/%ED%86%A0%EC%9D%B4%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/>토이프로젝트</a>
<a href=/tags/toyproject/>ToyProject</a>
<a href=/tags/%EB%B6%84%EC%84%9D/>분석</a>
<a href=/tags/requirements-analysis/>Requirements analysis</a>
<a href=/tags/%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%85%8B/>데이터셋</a>
<a href=/tags/dataset/>dataset</a>
<a href=/tags/grouplens/>GroupLens</a>
<a href=/tags/movielens/>MovieLens</a>
<a href=/tags/python/>Python</a>
<a href=/tags/pandas/>Pandas</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://grouplens.org/datasets/movielens/latest/ target=_blank rel=noopener><div class=article-details><h2 class=article-title>MovieLens Latest Datasets</h2><footer class=article-time>grouplens.org</footer></div></a></article><article><a href=https://github.com/codemario318/movielens-data/blob/main/analysis.ipynb target=_blank rel=noopener><div class=article-details><h2 class=article-title>데이터셋 구조 확인</h2><footer class=article-time>Github</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/movielens/2/><div class=article-image><img src=/post/movielens/2/cover.b58f190c97e00f5e1877639742b37ab3_hu223669cbbbe5efa1c70286790dba8a54_16582_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy alt="Featured image of post [MovieLens] 2. DB 설계" data-key=movielens/2 data-hash="md5-tY8ZDJfgD14Yd2OXQrN6sw=="></div><div class=article-details><h2 class=article-title>[MovieLens] 2. DB 설계</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>