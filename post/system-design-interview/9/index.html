<!doctype html><html lang=ko dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="가상 면접 사례로 배우는 대규모 시스템 설계 기초"><title>9. 웹 크롤러 설계</title><link rel=canonical href=https://codemario318.github.io/post/system-design-interview/9/><link rel=stylesheet href=/scss/style.min.cbce94e2760d14d60414e59d5a36ab2819232375817e010dbe7be2234b67da1b.css><meta property="og:title" content="9. 웹 크롤러 설계"><meta property="og:description" content="가상 면접 사례로 배우는 대규모 시스템 설계 기초"><meta property="og:url" content="https://codemario318.github.io/post/system-design-interview/9/"><meta property="og:site_name" content="Mario Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="가상 면접 사례로 배우는 대규모 시스템 설계 기초"><meta property="article:tag" content="System Design Interview"><meta property="article:tag" content="웹 크롤러"><meta property="article:tag" content="Web Crawler"><meta property="article:tag" content="검색 엔진 인덱싱"><meta property="article:tag" content="Search Engine Indexing"><meta property="article:tag" content="웹 아카이빙"><meta property="article:tag" content="Web Archiving"><meta property="article:tag" content="웹 마이닝"><meta property="article:tag" content="Web Mining"><meta property="article:tag" content="웹 모니터링"><meta property="article:tag" content="Web Monitoring"><meta property="article:published_time" content="2024-06-18T13:54:50+09:00"><meta property="article:modified_time" content="2024-06-18T13:54:50+09:00"><meta property="og:image" content="https://codemario318.github.io/post/system-design-interview/9/cover.png"><meta name=twitter:title content="9. 웹 크롤러 설계"><meta name=twitter:description content="가상 면접 사례로 배우는 대규모 시스템 설계 기초"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://codemario318.github.io/post/system-design-interview/9/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-K99591YLGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-K99591YLGK",{anonymize_ip:!1})}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3183752545292673" crossorigin=anonymous></script><meta name=naver-site-verification content="2315bde85c86f66092140cc465c340a2170f3187"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu760fd15c5fbb2f30cf0868dc4a5dc41a_14271_300x0_resize_q75_box.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Mario Blog</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/codemario318 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><ul class="menu sub-menu"><li><a href=/categories/backend/><span>Backend</span>
<span class=content-count>3</span></a></li><li><a href=/categories/boostcamp/><span>부스트캠프</span>
<span class=content-count>11</span></a></li><li><a href=/categories/cleancode/><span>Clean Code</span>
<span class=content-count>10</span></a></li><li><a href=/categories/common/><span>Common</span>
<span class=content-count>72</span></a></li><li><a href=/categories/data/><span>Data</span>
<span class=content-count>3</span></a></li><li><a href=/categories/db/><span>DB</span>
<span class=content-count>1</span></a></li><li><a href=/categories/frontend/><span>Frontend</span>
<span class=content-count>10</span></a></li><li><a href=/categories/golang/><span>GoLang</span>
<span class=content-count>13</span></a></li><li><a href=/categories/headfirstdesignpatterns/><span>헤드 퍼스트 디자인 패턴</span>
<span class=content-count>22</span></a></li><li><a href=/categories/infra/><span>Infra</span>
<span class=content-count>14</span></a></li><li><a href=/categories/nest/><span>Nest</span>
<span class=content-count>1</span></a></li><li><a href=/categories/network/><span>네트워크</span>
<span class=content-count>1</span></a></li><li><a href=/categories/node/><span>Node</span>
<span class=content-count>3</span></a></li><li><a href=/categories/problemsolving/><span>Problem Solving</span>
<span class=content-count>1</span></a></li><li><a href=/categories/project/><span>Project</span>
<span class=content-count>5</span></a></li><li><a href=/categories/realmysql/><span>Real MySQL</span>
<span class=content-count>53</span></a></li></ul><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#웹-크롤러>웹 크롤러?</a></li><li><a href=#1단계-문제-이해-및-설계-범위-확정>1단계: 문제 이해 및 설계 범위 확정</a><ol><li><a href=#개략적-규모-추정>개략적 규모 추정</a></li></ol></li><li><a href=#개략적인-설계안-제시-및-동의-구하기>개략적인 설계안 제시 및 동의 구하기</a><ol><li><a href=#웹-크롤러-작업-흐름>웹 크롤러 작업 흐름</a></li></ol></li><li><a href=#3단계-상세-설계>3단계: 상세 설계</a><ol><li><a href=#dfs-vs-bfs>DFS vs BFS</a></li><li><a href=#미수집-url-저장소>미수집 URL 저장소</a></li><li><a href=#html-다운로더>HTML 다운로더</a></li></ol></li><li><a href=#4단계-마무리>4단계: 마무리</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/system-design-interview/9/><img src=/post/system-design-interview/9/cover_huebcf5dd667df9af228f80687035dfdfb_164704_800x0_resize_box_3.png srcset="/post/system-design-interview/9/cover_huebcf5dd667df9af228f80687035dfdfb_164704_800x0_resize_box_3.png 800w, /post/system-design-interview/9/cover_huebcf5dd667df9af228f80687035dfdfb_164704_1600x0_resize_box_3.png 1600w" width=800 height=454 loading=lazy alt="Featured image of post 9. 웹 크롤러 설계"></a></div><div class=article-details><header class=article-category><a href=/categories/common/ style=background-color:#2a9d8f;color:#fff>Common</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/system-design-interview/9/>9. 웹 크롤러 설계</a></h2><h3 class=article-subtitle>가상 면접 사례로 배우는 대규모 시스템 설계 기초</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2024/06/18</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>11 minute read</time></div></footer></div></header><section class=article-content><h2 id=웹-크롤러>웹 크롤러?</h2><p>웹 크롤러는 로봇(Robot) 또는 스파이더(Spider)라고도 부르는 검색 엔진에서 널리 쓰는 기술로, <strong>웹에 새로 올라오거나 갱신된 콘텐츠를 찾아내는 것이 주된 목적</strong>이다.</p><p><img src=/post/system-design-interview/9/img.png width=690 height=746 srcset="/post/system-design-interview/9/img_hu8939a220c98e9690727ad8216a0decb0_158151_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_hu8939a220c98e9690727ad8216a0decb0_158151_1024x0_resize_box_3.png 1024w" loading=lazy alt="웹 크롤링 동작 예시" class=gallery-image data-flex-grow=92 data-flex-basis=221px></p><p>몇 개 웹 페이지에서 시작하여 그 링크를 따라 나가면서 새로운 콘텐츠를 수집한다.</p><ul><li>검색 엔진 인덱싱(Search engine indexing)<ul><li>가장 보편적인 용례로 웹 페이지를 모아 검색 엔진을 위한 로컬 인덱스를 만든다.</li><li>Googlebot</li></ul></li><li>웹 아카이빙(Web Archiving)<ul><li>장기보관을 목적으로 웹에서 정보를 모으는 절차를 말한다.</li><li>국립 도서관 등</li></ul></li><li>웹 마이닝(Web mining)<ul><li>인터넷에서 유용한 지식을 도출해 낼 수 있다.</li><li>금융 기업들의 기업 분석용</li></ul></li><li>웹 모니터링(Web monitoring)<ul><li>인터넷에서 저작권이나 상표권이 침해되는 사례를 모니터링 할 수 있다.</li><li>디지마크(Digimarc)사는 크롤러를 통해 해적판 저작물을 찾아내 보고한다.</li></ul></li></ul><p>웹 크롤러의 복잡도는 웹 크롤러가 처리해야 하는 데이터의 규모에 따라 달라지므로 설계할 웹 크롤러가 감당해야 하는 데이터의 규모와 기능들을 알아내야한다.</p><h2 id=1단계-문제-이해-및-설계-범위-확정>1단계: 문제 이해 및 설계 범위 확정</h2><p>웹 크롤러의 기본 알고리즘은 간단하다.</p><ol><li>URL 집합이 입력으로 주어지면, 해당 URL들이 가르키는 모든 웹 페이지를 다운로드한다.</li><li>다운받은 웹 페이지에서 URL들을 추출한다.</li><li>추출된 URL들을 다운로드할 URL 목록에 추가하고 위 과정을 처음부터 반복한다.</li></ol><p>하지만 엄청난 규모 확장성을 갖는 웹 크롤러를 설계하는 것은 매우 어려운 작업이다.</p><p>질문을 던져 요구사항을 알아내고 설계 범위를 좁힌다.</p><ul><li>Q. 주된 용도는?<ul><li>A. 검색 엔진 인덱싱</li></ul></li><li>Q. 매달 수집해야하는 웹 페이지 수<ul><li>A. 약 10억개</li></ul></li><li>Q. 새로 만들어진 웹 페이지나 수정된 웹 페이지도 고려해야하는가?<ul><li>A. 예</li></ul></li><li>Q. 수집한 웹 페이지는 저장해야하는가?<ul><li>A. 5년간 저장</li></ul></li><li>Q. 중복된 콘텐츠는?<ul><li>A. 무시해도 괜찮음</li></ul></li></ul><p>질문을 통해 알아낸 요구사항을 명확히 하면서도 좋은 웹 크롤러가 만족시켜야 할 다음과 같은 속성에 주의를 기울여야한다.</p><ul><li>규모 확장성<ul><li>웹은 수십억 개의 페이지가 존재하는 것으로 알려진 만큼 매우 거대하므로, <strong>병행성(Parallelism)을 활용</strong>하면 보다 효과적으로 웹 크롤링을 수행할 수 있다.</li></ul></li><li>안정성(Robustness)<ul><li>비정상적인 입력이나 황경에 잘 대응할 수 있어야 한다.</li><li>잘못 작성된 HTML, 반응 없는 서버, 장애, 악성 코드가 붙어있는 링크 등</li></ul></li><li>예절(Politeness)<ul><li>짧은 시간 동안 너무 많은 요청을 보내어 서버에 무리를 주면 안된다.</li></ul></li><li>확장성(Extensibility)<ul><li>새로운 형태의 콘텐츠를 지원하기 쉬워야한다.</li></ul></li></ul><h3 id=개략적-규모-추정>개략적 규모 추정</h3><ul><li>매달 10억 개의 웹 페이지 다운로드<ul><li><code>QPS = 10억 / 30일 / 24시간 / 3600초 = 약 400페이지/s</code></li><li><code>최대(peak) QPS = 2 x QPS = 800</code></li></ul></li><li>웹 페이지의 평균 크기는 500k로 가정<ul><li><code>10억 페이지 * 500k = 500TB/월</code></li><li><code>1개월치 = 500TB * 12개월 * 5년 = 30PB</code></li></ul></li></ul><h2 id=개략적인-설계안-제시-및-동의-구하기>개략적인 설계안 제시 및 동의 구하기</h2><p><img src=/post/system-design-interview/9/img_1.png width=845 height=607 srcset="/post/system-design-interview/9/img_1_huc28c39ee12ec2f7699c2ff04ca5e2694_53266_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_1_huc28c39ee12ec2f7699c2ff04ca5e2694_53266_1024x0_resize_box_3.png 1024w" loading=lazy alt="크롤러의 작업 흐름" class=gallery-image data-flex-grow=139 data-flex-basis=334px></p><p><strong>시작 URL 집합</strong></p><p>시작 URL 집합은 <strong>웹 크롤러가 크롤링을 시작하는 출발점</strong>이다.</p><p>전체 웹을 크롤링해야 하는 경우 시작 URL을 고를 때 가능한 한 많은 링크를 탐색할 수 있도록 하는 URL을 고르는 것이 바람직하다.</p><ul><li>일반적으로 전체 URL 공간을 작은 부분집합으로 나누는 전략을 사용<ul><li>지역적인 특색, 즉 지역별로 인기 있는 웹 사이트가 다르다는 점에 착안</li></ul></li><li>주제별로 다른 시작 URL을 사용<ul><li>쇼핑, 스포츠, 건강 등의 주제별로 세분화하고 그 각각에 다른 시작 URL 사용</li></ul></li></ul><p>시작 URL로 무엇을 쓸 것이냐는 질문에 정담은 없으므로 의도가 무엇인지만 정확히 전달해도 충분하다.</p><p><strong>미수집 URL 저장소</strong></p><p>대부분의 현대적 웹 크롤러는 크롤링 상태를 <strong>다운로드할 URL</strong>, <strong>다운로드된 URL</strong> 두 가지로 나눠 관리한다.</p><p>다운로드할 URL을 저장 관리하는 컴포넌트를 미수집 URL 저장소(URL Frontier)라고 부른다.</p><p><strong>HTML 다운로더</strong></p><p>HTML 다운로더는 <strong>인터넷에서 웹 페이지를 다운로드하는 컴포넌트</strong>이다.</p><p>다운로드할 페이지의 URL은 미수집 URL 저장소가 제공한다.</p><p><strong>도메인 이름 변환기</strong></p><p>웹 페이지를 다운받으려면 URL을 IP로 변환하는 절차가 필요하므로, HTML 다운로더는 도메인 이름 변환기를 이용하여 <strong>URL에 대응되는 IP 주소를 알아낸다.</strong></p><p><strong>콘텐츠 파서</strong></p><p>웹 페이지를 다운로드하면 <strong>파싱</strong>과 <strong>검증</strong>절차를 거쳐야한다.</p><p>크롤링 서버 안에 콘텐츠 파서를 구현하면 크롤링 과정이 느려지게 될 수 있으므로 독립된 컴포넌트로 만드는 것이 좋다.</p><p><strong>중복 콘텐츠인가?</strong></p><p>연구 결과에 따르면, 29% 가량의 웹 페이지 콘텐츠는 중복이다.</p><p>따라서 <strong>같은 콘텐츠를 여러 번 저장</strong>하게 될 수 있으므로 중복을 해결하기 위한 자료 구조를 도입하여 <strong>데이터 중복을 줄이고</strong> 데이터 처리에 소요되는 시간을 줄일 수 있다.</p><p>두 HTML 문서를 비교하는 가장 간단한 방법은 문서를 문자열로 보고 비교하는 방법을 고려할 수 있지만, 문서의 수가 매우 많은 경우 느리고 비효율적이므로, 대부분 웹 페이지의 해시 값을 비교하여 처리한다.</p><p><strong>콘텐츠 저장소</strong></p><p><strong>HTML 문서를 보관하는 시스템</strong>이다.</p><p>저장소를 구현하는 데 쓰일 구술을 고를 때는 <strong>저장할 데이터의 유형</strong>, <strong>크기</strong>, <strong>저장소 접근 빈도</strong>, <strong>데이터의 유효 기간</strong> 등을 종합적으로 고려한다.</p><p>본 설계안은 디스크와 메모리를 동시에 사용하는 저장소를 선택할 것이다.</p><ul><li>데이터 양이 너무 많으므로 대부분의 콘텐츠는 디스크에 저장한다.</li><li>인기 있는 콘텐츠는 메모리에 두어 접근 지연시간을 줄인다.</li></ul><p><strong>URL 추출기</strong></p><p>HTML 페이지를 파싱하여 링크들을 골라내는 역할을 수행한다.</p><p><img src=/post/system-design-interview/9/img_2.png width=821 height=430 srcset="/post/system-design-interview/9/img_2_hu04f4fd4b9507be952f6ff4565090f5b3_203231_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_2_hu04f4fd4b9507be952f6ff4565090f5b3_203231_1024x0_resize_box_3.png 1024w" loading=lazy alt="링크 추출 사례" class=gallery-image data-flex-grow=190 data-flex-basis=458px></p><ul><li>상대 경로를 모두 절대 경로로 변환한다.</li></ul><p><strong>URL 필터</strong></p><p>특정 URL을 크롤링 대상에서 배제한다.</p><ul><li>특정한 콘텐츠 타입이나 파일 확장자를 갖는 URL</li><li>접속 시 오류가 발생하는 URL</li><li>접근 제외 목록(deny list)에 포함된 URL 등</li></ul><p><strong>이미 방문한 URL?</strong></p><p>이미 방문한 URL이나 미수집 URL 저장소에 보관된 URL을 추적할 수 있도록 하는 자료 구조를 활용하여 구현한다.</p><ul><li>URL 방문 여부를 추적하여 같은 URL을 여러번 처리하는 일을 방지할 수 있다.</li><li>서버 부하를 줄이고 무한 루프에 빠지는 일을 방지할 수 있다.</li></ul><p>해시 테이블이나 블룸 필터가 널리 쓰인다.</p><p><strong>URL 저장소</strong></p><p>이미 방문한 URL을 보관하는 저장소다.</p><h3 id=웹-크롤러-작업-흐름>웹 크롤러 작업 흐름</h3><p><img src=/post/system-design-interview/9/img_3.png width=840 height=592 srcset="/post/system-design-interview/9/img_3_hufd385b60137cff9b9db1e88901bb7b7d_62024_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_3_hufd385b60137cff9b9db1e88901bb7b7d_62024_1024x0_resize_box_3.png 1024w" loading=lazy alt="웹 크롤러 작업 흐름" class=gallery-image data-flex-grow=141 data-flex-basis=340px></p><ol><li>시작 URL들을 미수집 URL 저장소에 저장</li><li>HTML 다운로더는 미수집 URL 저장소에서 URL 목록을 가져옴</li><li>HTML 다운로더는 도메인 이름 변환기를 사용하여 URL의 IP 주소를 알아내고, 웹 페이지를 다운로드</li><li>콘텐츠 파서는 다운된 HTML 페이지를 파싱하여 올바른 형식을 갖춘 페이지인지 검증</li><li>콘텐츠 파싱과 검증이 끝나면 중복 콘텐츠인지 확인 절차 시작</li><li>해당 페이지가 이미 저장소에 있는지 확인<ul><li>이미 저장소에 있는 경우 처리하지 않고 버린다.</li><li>저장소에 없는 콘텐츠인 경우 저장소에 저장한 뒤 URL 추출기로 전달</li></ul></li><li>URL 추출기는 해당 HTML 페이지에서 링크를 추출함</li><li>추출한 링크를 URL 필터로 전달</li><li>필터링이 끝나고 남은 URL만 중복 URL 판별 단계로 전달</li><li>URL 저장소에 보관된 URL인지 살피고 이미 있는 URL은 버린다.</li><li>저장소에 없는 URL은 URL 저장소에 저장하고, 미수집 URL 저장소에 전달</li></ol><h2 id=3단계-상세-설계>3단계: 상세 설계</h2><p>가장 중요한 컴포넌트와 그 구현 기술을 심도있게 살펴본다.</p><h3 id=dfs-vs-bfs>DFS vs BFS</h3><p>웹은 유향 그래프(directed graph)와 같으며, 크롤링 프로세스는 이 유향 그래프를 탐색하는 과정이다.</p><p>그래프 탐색에 널리 사용되는 알고리즘은 DFS, BFS 두 가지 알고리즘인데 그래프의 크기가 얼마나 클지 가늠할 수 없으므로 BFS를 주로 사용한다.</p><p><img src=/post/system-design-interview/9/img_4.png width=745 height=599 srcset="/post/system-design-interview/9/img_4_hua510aa57a9e56ad00992b50a10e4d6b2_76959_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_4_hua510aa57a9e56ad00992b50a10e4d6b2_76959_1024x0_resize_box_3.png 1024w" loading=lazy alt=BFS class=gallery-image data-flex-grow=124 data-flex-basis=298px></p><p><strong>BFS의 문제점</strong></p><p>BFS는 FIFO 큐에 탐색할 URL를 추가하는 방식인데, 이러한 구현법에는 두 가지 문제점이 있다.</p><ul><li>한 페이지에서 나오는 링크의 상당수는 같은 서버로 되돌아간다.<ul><li>같은 호스트에 속한 많은 링크를 다운받게 되는데, 병렬로 처리하게 된다면 수집 대상 서버는 수많은 요청으로 과부하에 걸린다.</li><li>예의 없는 크롤러로 간주</li></ul></li><li>URL에 우선순위를 두지 않는다.<ul><li>모든 웹 페이지가 같은 수준의 품질, 중요성을 갖지는 않는다.</li><li>페이지 순위, 트래픽의 양, 업데이트 빈도 등 여러가지 척도에 따라 우선순위를 구별하는 것이 좋을 수 있다.</li></ul></li></ul><h3 id=미수집-url-저장소>미수집 URL 저장소</h3><p>미수집 저장소를 잘 구현하면 예의를 갖춘 크롤러, URL 사이의 우선순위와 신선도를 구별하는 크롤러를 구현할 수 있다.</p><p><strong>예의</strong></p><p>웹 크롤러는 <strong>수집 대상 서버로 짧은 시간 안에 너무 많은 요청을 보내는 것을 삼가</strong>야 한다.</p><ul><li>동일 웹 사이트에 대해서는 한 번에 한 페이지만 요청한다.<ul><li>같은 웹 사이트의 페이지를 다운받는 태스크는 시간차를 두고 실행한다.</li><li>호스트명과 다운로드를 수행하는 작업 스레드 사이의 관계를 유지한다.</li><li>각 다운로드 스레드는 별도의 큐를 통해 해당 큐에서 꺼낸 URL만 다운로드한다.</li></ul></li></ul><p><img src=/post/system-design-interview/9/img_5.png width=694 height=684 srcset="/post/system-design-interview/9/img_5_hu9b21d490c5125653d38c7ab94cc56cb6_123801_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_5_hu9b21d490c5125653d38c7ab94cc56cb6_123801_1024x0_resize_box_3.png 1024w" loading=lazy alt="예의 있는 크롤러 설계 예시" class=gallery-image data-flex-grow=101 data-flex-basis=243px></p><ul><li>큐 라우터<ul><li>같은 호스트에 속한 URL은 언제나 같은 큐로 가도록 보장한다.</li></ul></li><li>매핑 테이블<ul><li>호스트 이름과 큐 사이의 관계를 보관한다.</li><li><div class=table-wrapper><table><thead><tr><th>호스트</th><th>큐</th></tr></thead><tbody><tr><td>wikipedia.com</td><td>b1</td></tr><tr><td>apple.com</td><td>b2</td></tr><tr><td>&mldr;</td><td>&mldr;</td></tr><tr><td>nike.com</td><td>bn</td></tr></tbody></table></div></li></ul></li><li>FIFO 큐<ul><li>같은 호스트에 속한 URL은 언제나 같은 큐에 보관</li></ul></li><li>큐 선택기<ul><li>큐들을 순회하면서 큐에서 URL을 꺼내어 해당 큐에서 나온 URL을 다운로드하도록 지정된 작업 스레드에 전달한다.</li></ul></li><li>작업 스레드<ul><li>전달된 URL을 다운로드한다.</li><li>순차적으로 처리되며, 작업 사이에 일정한 지연시간을 둘 수 있다.</li></ul></li></ul><p><strong>우선순위</strong></p><p>유용성에 따라 URL의 우선순위를 나눌 때는 페이지랭크(PageRank), 트래픽 양, 갱신 빈도(Update Frequency) 등 다양한 척도를 사용할 수 있다.</p><p><img src=/post/system-design-interview/9/img_6.png width=679 height=682 srcset="/post/system-design-interview/9/img_6_hu2b81a326b445fb63ed389467d8b1a40b_64739_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_6_hu2b81a326b445fb63ed389467d8b1a40b_64739_1024x0_resize_box_3.png 1024w" loading=lazy alt="우선순위를 고려하는 크롤러 설계 예시" class=gallery-image data-flex-grow=99 data-flex-basis=238px></p><ul><li>순위결정장치<ul><li>URL을 입력으로 받아 우선순위를 계산한다.</li></ul></li><li>큐<ul><li>우선순위별로 큐가 하나씩 할당된다.</li><li>우선순위가 높으면 선택될 확률도 올라간다.</li></ul></li><li>큐 선택기<ul><li>임의 큐에서 처리할 URL을 꺼낸다.</li><li>순위가 높은 큐에서 더 자주 꺼낸다.</li></ul></li></ul><p><strong>전체 설계</strong></p><p><img src=/post/system-design-interview/9/img_7.png width=624 height=1120 srcset="/post/system-design-interview/9/img_7_hua7682a46c4831907399b700105278b58_160845_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_7_hua7682a46c4831907399b700105278b58_160845_1024x0_resize_box_3.png 1024w" loading=lazy alt="전체 설계" class=gallery-image data-flex-grow=55 data-flex-basis=133px></p><ul><li>전면 큐(front queue)<ul><li>우선순위 결과 과정을 처리한다.</li></ul></li><li>후면 큐(back queue)<ul><li>크롤러가 예의 바르게 동작하도록 보증한다.</li></ul></li></ul><p><strong>신선도</strong></p><p>웹 페이지는 수시로 추가되고, 삭제되고, 변경되므로 <strong>데이터의 신선함을 유지하기 위해 이미 다운로드한 페이지라고 해도 주기적으로 재수집</strong>할 필요가 있다.</p><p>모든 URL을 재수집하는 것은 많은 시간과 자원이 필요한 작업이므로, 이 작업을 최적화하기 위한 전략으로 다음과 같은 것들이 있다.</p><ul><li>웹 페이지의 변경 이력 활용</li><li>우선순위를 활용하여, 중요한 페이지는 좀 더 자주 재수집</li></ul><p><strong>미수집 URL 저장소를 위한 지속성 저장장치</strong></p><p>검색엔진을 위한 크롤러는 처리해야하는 URL이 수억 개에 달한다.</p><p>따라서 모두 메모리에 보관하는 것은 안정성이나 규모 확장성 측면에서 바람직하지 않고, 전부 디스크에 저장하는 것도 성능 병목으로 인해 적절치 않다.</p><p>따라서 절충안을 택하여, <strong>대부분의 URL은 디스크에 두고 IO 비용을 줄이기 위해 메모리 버퍼에 큐를 두는 것</strong>을 고려한다.</p><p>버퍼에 있는 데이터는 주기적으로 디스크에 기록된다.</p><h3 id=html-다운로더>HTML 다운로더</h3><p>HTML 다운로더는 HTTP 프로토콜을 통해 웹 페이지를 내려받는다.</p><p><strong>Robots.txt</strong></p><p>로봇 제외 프로토콜이라고도 부르는 Robots.txt는 웹사이트가 크롤러와 소통하는 표준적 방법이다.</p><p>Robots.txt 파일에는 크롤러가 수집해되 되는 페이지 목록이 들어있다.</p><p>따라서 웹 사이트를 크롤링 하기 전 해당 파일에 나열된 규칙을 먼저 확인해야 한다.</p><p>Robots.txt 파일을 거푸 다운로드하는 것을 피하기 위해, 이 파일은 주기적으로 다운받아 캐시에 보관한다.</p><p><strong>성능 최적화</strong></p><ul><li><p>분산 크롤링</p><ul><li><img src=/post/system-design-interview/9/img_8.png width=610 height=495 srcset="/post/system-design-interview/9/img_8_hu4704f60e777f14cba6bfd4009fcd3078_47203_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_8_hu4704f60e777f14cba6bfd4009fcd3078_47203_1024x0_resize_box_3.png 1024w" loading=lazy alt="분산 크롤링 예시" class=gallery-image data-flex-grow=123 data-flex-basis=295px></li><li>성능을 높이기 위해 크롤링 작업을 여러 서버에 분산하는 방법이다.</li><li>각 서버는 여러 스레드를 돌려 다운로드 작업을 처리한다.</li></ul></li><li><p>도메인 이름 변호나 결과 캐시</p><ul><li>도메인 이름 변환기는 DNS 요청을 보내고 결과를 받는 작업의 동기적 틍성으로 인해 크롤러 성능의 변목 중 하나이다.</li><li>DNS 조회 결과로 얻어진 도메인 이름과 IP 주소 사이의 관계를 캐시에 보관해 놓고 크론 잡 등을 돌려 주기적으로 갱신하도록 해놓으면 성능을 효과적으로 높힐 수 있다.</li></ul></li><li><p>지역성</p><ul><li>크롤링 작업을 수행하는 서버를 지역별로 분산하는 방법이다.</li><li>크롤링 서버가 대상 서버와 지역적으로 가까우면 페이지 다운로드 시간을 줄일 수 있다.</li><li>이러한 전략은 크롤 서버, 캐시, 큐, 저장소 등 대부분의 컴포넌트에 적용 가능하다.</li></ul></li><li><p>짧은 타임아웃</p><ul><li>응답이 느리거나 하지 않는 서버에 대한 요청은 대기시간이 길어지므로, 최대 얼마나 기다릴지를 미리 정해 다운로드를 빨리 중단하여 다음 차례로 넘어간다.</li></ul></li></ul><p><strong>안정성</strong></p><p>시스템 안정성을 향상하기 위한 접근법 가운데 중요한 몇가지는 아래와 같다.</p><ul><li>안정 해시<ul><li>다운로더 서버들에 부하를 분산할 때 적용 가능</li><li>다운로더 서버를 쉽게 추가하고 삭제할 수 있다.</li></ul></li><li>크롤링 상태 및 수집 데이터 저장<ul><li>장애가 발생한 경우에도 쉽게 복구할 수 있도록 크롤링 상태와 수집된 데이터를 지속적 저장장치에 기록해 두는 것이 바람직하다.</li><li>크롤링을 쉽게 재시작할 수 있을 것이다.</li></ul></li><li>예외 처리<ul><li>대규모 시스템에서 에러는 불가피할 뿐 아니라 흔하게 벌어진다.</li><li>전체 시스템이 중단되는 일 없이 그 작업을 우아하게 이어나갈 수 있어야 한다.</li></ul></li><li>데이터 검증<ul><li>시스템 오류를 방지하기 위한 종요 수간 가운데 하나이다.</li></ul></li></ul><p><strong>확정성</strong></p><p>새로운 형태의 콘텐츠를 쉽게 지원할 수 있도록 신경 써야 한다.</p><p>새로운 모듈을 끼워 넣음으로써 새로운 형태의 콘텐츠를 지원할 수 있도록 설계할 수 있다.</p><p><img src=/post/system-design-interview/9/img_9.png width=844 height=555 srcset="/post/system-design-interview/9/img_9_hu6bd6fe39d4fb6e162d1d6c362b2e20a7_81130_480x0_resize_box_3.png 480w, /post/system-design-interview/9/img_9_hu6bd6fe39d4fb6e162d1d6c362b2e20a7_81130_1024x0_resize_box_3.png 1024w" loading=lazy alt="확장 모듈 반영 설계" class=gallery-image data-flex-grow=152 data-flex-basis=364px></p><ul><li>PNG 다운로더<ul><li>PNG 파일을 다운로드하는 플러그인 모듈</li></ul></li><li>웹 모니터<ul><li>웹을 모니터링하여 저작권이나 상표권이 침해되는 일을 막는 모듈</li></ul></li></ul><p><strong>문제 있는 콘텐츠 감지 및 회피</strong></p><p>중복이거나 의미 없는, 또는 유해한 콘텐츠를 감지하고 차단해야한다.</p><ul><li>중복 콘텐츠<ul><li>해시나 체크섬을 사용하면 중복 콘텐츠를 쉽게 탐지할 수 있다.</li></ul></li><li>거미 덫<ul><li>크롤러를 무한 루프에 빠드리도록 설계한 웹 페이지다.<ul><li><code>www.spidertrapexample.com/foo/bar/foo/bar/foo/bar/...</code></li></ul></li><li>만능 해결책은 없지만 몇가지 방법이 있다.<ul><li>URL 최대 길이를 제한</li><li>수작업으로 덫을 확인하고 착아낸 후 탐색 대상에서 제외하거나 필터 목록에 추가한다.</li></ul></li></ul></li><li>데이터 노이즈<ul><li>가치가 없는 콘텐츠는 제외한다.</li><li>광고, 스크립트 코드, 스팸 URL 등</li></ul></li></ul><h2 id=4단계-마무리>4단계: 마무리</h2><p>좋은 크롤러는 <strong>규모 확정성</strong>, <strong>예의</strong>, <strong>확장성</strong>, <strong>안정성</strong> 등을 고려해야한다.</p><p>웹이 방대하고, 수없이 많은 덫이 도사리고 있기 때문에 규모 확장성이 뛰어난 웹 크롤러 설계는 단순하지 않다.</p><ul><li>서버 측 렌더링<ul><li>비동기를 통해 동적으로 생성되는 링크는 페이지를 파싱하기 전에 서버 측 렌더링을 적용하면 해결할 수 있다.</li></ul></li><li>윈치 않는 페이지 필터링<ul><li>스팸 방지 컴포넌트를 두어 품질이 조악하거나 스팸성인 페이지를 걸러내도록 하면 좋다.</li></ul></li><li>데이터베이스 다중화 및 샤딩<ul><li>다중화나 샤딩 같은 기법을 적용하면 데이터 계층의 가용성, 규모 확장성, 안정성이 향상된다.</li></ul></li><li>수평적 규모 확장성<ul><li>대규모 크롤링을 위해 다운로스 서버가 수천 대 필요하게 될 수 있으므로, 수평적 규모 확장을 위해 무상태 서버로 만드는 것이 중요하다.</li></ul></li><li>가용성, 일관성, 안정성<ul><li>대형 시스템을 만들기 위해 필수적으로 고려해야한다. (1장 복습)</li></ul></li><li>데이터 분석 솔루션<ul><li>데이터르 수집하고 분석하는 것은 어느 시스템에게나 중요하다.</li></ul></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/%EA%B0%80%EC%83%81-%EB%A9%B4%EC%A0%91-%EC%82%AC%EB%A1%80%EB%A1%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84-%EA%B8%B0%EC%B4%88/>가상 면접 사례로 배우는 대규모 시스템 설계 기초</a>
<a href=/tags/system-design-interview/>System Design Interview</a>
<a href=/tags/%EC%9B%B9-%ED%81%AC%EB%A1%A4%EB%9F%AC/>웹 크롤러</a>
<a href=/tags/web-crawler/>Web Crawler</a>
<a href=/tags/%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84-%EC%9D%B8%EB%8D%B1%EC%8B%B1/>검색 엔진 인덱싱</a>
<a href=/tags/search-engine-indexing/>Search Engine Indexing</a>
<a href=/tags/%EC%9B%B9-%EC%95%84%EC%B9%B4%EC%9D%B4%EB%B9%99/>웹 아카이빙</a>
<a href=/tags/web-archiving/>Web Archiving</a>
<a href=/tags/%EC%9B%B9-%EB%A7%88%EC%9D%B4%EB%8B%9D/>웹 마이닝</a>
<a href=/tags/web-mining/>Web Mining</a>
<a href=/tags/%EC%9B%B9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81/>웹 모니터링</a>
<a href=/tags/web-monitoring/>Web Monitoring</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class="article-list--compact links"><article><a href=https://product.kyobobook.co.kr/detail/S000001033116 target=_blank rel=noopener><div class=article-details><h2 class=article-title>가상 면접 사례로 배우는 대규모 시스템 설계 기초</h2><footer class=article-time>교보문고</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/system-design-interview-2/13/><div class=article-image><img src=/post/system-design-interview-2/13/cover.eb0176bd1597a4b4423be0cc9ee612d7_huf565d8fe7a4f9f5a961306624616abfc_449360_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 13. 증권 거래소" data-key=system-design-interview-2/13 data-hash="md5-6wF2vRWXpLRCO+DMnuYS1w=="></div><div class=article-details><h2 class=article-title>13. 증권 거래소</h2></div></a></article><article class=has-image><a href=/post/system-design-interview-2/12/><div class=article-image><img src=/post/system-design-interview-2/12/cover.eb0176bd1597a4b4423be0cc9ee612d7_huf565d8fe7a4f9f5a961306624616abfc_449360_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 12. 전자 지갑" data-key=system-design-interview-2/12 data-hash="md5-6wF2vRWXpLRCO+DMnuYS1w=="></div><div class=article-details><h2 class=article-title>12. 전자 지갑</h2></div></a></article><article class=has-image><a href=/post/system-design-interview-2/11/><div class=article-image><img src=/post/system-design-interview-2/11/cover.eb0176bd1597a4b4423be0cc9ee612d7_huf565d8fe7a4f9f5a961306624616abfc_449360_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 11. 결제 시스템" data-key=system-design-interview-2/11 data-hash="md5-6wF2vRWXpLRCO+DMnuYS1w=="></div><div class=article-details><h2 class=article-title>11. 결제 시스템</h2></div></a></article><article class=has-image><a href=/post/system-design-interview-2/10/><div class=article-image><img src=/post/system-design-interview-2/10/cover.eb0176bd1597a4b4423be0cc9ee612d7_huf565d8fe7a4f9f5a961306624616abfc_449360_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 10. 실시간 게임 순위표" data-key=system-design-interview-2/10 data-hash="md5-6wF2vRWXpLRCO+DMnuYS1w=="></div><div class=article-details><h2 class=article-title>10. 실시간 게임 순위표</h2></div></a></article><article class=has-image><a href=/post/system-design-interview-2/9/><div class=article-image><img src=/post/system-design-interview-2/9/cover.eb0176bd1597a4b4423be0cc9ee612d7_huf565d8fe7a4f9f5a961306624616abfc_449360_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post 9. S3와 유사한 객체 저장소" data-key=system-design-interview-2/9 data-hash="md5-6wF2vRWXpLRCO+DMnuYS1w=="></div><div class=article-details><h2 class=article-title>9. S3와 유사한 객체 저장소</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=codemario318/codemario318.github.io issue-term=pathname label=Comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2025 Mario Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>